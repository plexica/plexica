# ========================================
# Plexica Platform - Production Environment Variables
# ========================================
# This file contains all environment variables needed for production deployment
# Copy this file to .env.prod and fill in the actual values
# IMPORTANT: Never commit .env.prod to version control!

# ========================================
# 1. GENERAL CONFIGURATION
# ========================================

# Node environment
NODE_ENV=production

# Application URLs
API_URL=https://api.plexica.com
WEB_APP_URL=https://app.plexica.com
SUPER_ADMIN_URL=https://admin.plexica.com
KEYCLOAK_URL=https://auth.plexica.com

# ========================================
# 2. DATABASE (PostgreSQL)
# ========================================

# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database?schema=public
DATABASE_URL=postgresql://plexica:CHANGE_ME_STRONG_PASSWORD@postgres:5432/plexica?schema=public

# Database credentials (for Docker Compose)
POSTGRES_USER=plexica
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=plexica
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# ========================================
# 3. AUTHENTICATION (Keycloak)
# ========================================

# Keycloak admin credentials
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=CHANGE_ME_KEYCLOAK_ADMIN_PASSWORD

# Keycloak configuration
KEYCLOAK_URL=https://auth.plexica.com
KEYCLOAK_REALM=plexica
KEYCLOAK_CLIENT_ID=plexica-api
KEYCLOAK_CLIENT_SECRET=CHANGE_ME_CLIENT_SECRET

# JWT configuration
JWT_SECRET=CHANGE_ME_JWT_SECRET_AT_LEAST_32_CHARACTERS_LONG
JWT_EXPIRATION=1h
JWT_REFRESH_EXPIRATION=7d

# ========================================
# 4. REDIS (Caching & Sessions)
# ========================================

REDIS_URL=redis://redis:6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_HOST=redis
REDIS_PORT=6379

# ========================================
# 5. MESSAGE QUEUE (Redpanda/Kafka)
# ========================================

REDPANDA_BROKERS=redpanda:9092
KAFKA_BROKERS=redpanda:9092

# ========================================
# 6. OBJECT STORAGE (MinIO)
# ========================================

MINIO_ENDPOINT=minio:9000
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=CHANGE_ME_MINIO_PASSWORD
MINIO_ACCESS_KEY=CHANGE_ME_MINIO_ACCESS_KEY
MINIO_SECRET_KEY=CHANGE_ME_MINIO_SECRET_KEY
MINIO_BUCKET_NAME=plexica
MINIO_USE_SSL=false

# ========================================
# 7. CORE API CONFIGURATION
# ========================================

# Server configuration
API_PORT=3000
API_HOST=0.0.0.0

# CORS configuration (comma-separated origins)
CORS_ORIGINS=https://app.plexica.com,https://admin.plexica.com

# Rate limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# ========================================
# 8. FRONTEND APPS CONFIGURATION
# ========================================

# Web App (Tenant Frontend)
VITE_API_URL=https://api.plexica.com
VITE_KEYCLOAK_URL=https://auth.plexica.com
VITE_KEYCLOAK_REALM=plexica
VITE_KEYCLOAK_CLIENT_ID=plexica-web

# Super Admin App
VITE_SUPER_ADMIN_API_URL=https://api.plexica.com
VITE_APP_NAME="Plexica Super Admin"

# ========================================
# 9. NGINX CONFIGURATION
# ========================================

# Nginx ports
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# SSL/TLS (if using Let's Encrypt or custom certs)
# SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
# SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# ========================================
# 10. MONITORING & OBSERVABILITY (Optional)
# ========================================

# Sentry (Error tracking)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Application Insights
# APPINSIGHTS_INSTRUMENTATIONKEY=your-key-here

# ========================================
# 11. EMAIL CONFIGURATION (Optional)
# ========================================

# SMTP configuration for sending emails
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=noreply@plexica.com
# SMTP_PASSWORD=CHANGE_ME_SMTP_PASSWORD
# SMTP_FROM=noreply@plexica.com
# SMTP_SECURE=true

# ========================================
# 12. BACKUP & DISASTER RECOVERY (Optional)
# ========================================

# Database backup configuration
# BACKUP_ENABLED=true
# BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
# BACKUP_RETENTION_DAYS=30
# BACKUP_S3_BUCKET=plexica-backups
# BACKUP_S3_REGION=us-east-1

# ========================================
# 13. FEATURE FLAGS (Optional)
# ========================================

# FEATURE_PLUGIN_MARKETPLACE=true
# FEATURE_ANALYTICS=true
# FEATURE_CUSTOM_DOMAINS=false

# ========================================
# NOTES & SECURITY REMINDERS
# ========================================
# 
# 1. CHANGE ALL PASSWORDS: Replace all "CHANGE_ME_*" values with strong, random passwords
# 2. USE STRONG SECRETS: Generate secure random strings for JWT_SECRET and client secrets
# 3. ENABLE SSL/TLS: In production, always use HTTPS with valid SSL certificates
# 4. RESTRICT CORS: Only allow trusted origins in CORS_ORIGINS
# 5. SECURE DATABASE: Use strong passwords and restrict network access to databases
# 6. REGULAR BACKUPS: Enable and test database backups regularly
# 7. MONITOR LOGS: Set up log aggregation and monitoring (ELK, Datadog, etc.)
# 8. UPDATE REGULARLY: Keep all dependencies and Docker images up to date
# 9. FIREWALL RULES: Configure firewalls to only allow necessary traffic
# 10. SECRETS MANAGEMENT: Consider using a secrets manager (HashiCorp Vault, AWS Secrets Manager)
#
# ========================================
