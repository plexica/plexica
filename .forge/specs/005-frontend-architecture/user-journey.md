# User Journeys: Frontend Architecture (App Shell)

> **Spec reference**: `.forge/specs/005-frontend-architecture/spec.md`
> **Design spec**: `.forge/specs/005-frontend-architecture/design-spec.md`
> **Generated by**: `/forge-ux`
> **Date**: 2026-02-26

---

## 1. Personas

### Persona 1: Dana

| Field               | Detail                                                                                                                                               |
| ------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| Name                | Dana                                                                                                                                                 |
| Role                | Tenant Admin (CRM company, manages 25 users)                                                                                                         |
| Age range           | 32-45                                                                                                                                                |
| Goal                | Customize the platform's look to match company branding, manage which plugins appear in the sidebar, and ensure employees have a seamless experience |
| Pain points         | 1. Theme changes never preview before applying. 2. Session timeouts lose unsaved work. 3. Plugin pages that break disrupt the entire app             |
| Tech literacy       | High                                                                                                                                                 |
| Device preference   | Desktop (1440px, dual monitor)                                                                                                                       |
| Accessibility needs | None                                                                                                                                                 |
| Quote               | _"I need to make this feel like our product, not a generic platform."_                                                                               |

---

### Persona 2: Marcus

| Field               | Detail                                                                                                                                                 |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Name                | Marcus                                                                                                                                                 |
| Role                | End user (sales rep using CRM and Billing plugins daily)                                                                                               |
| Age range           | 24-35                                                                                                                                                  |
| Goal                | Navigate between plugin pages quickly, complete tasks without interruption, and recover gracefully when something goes wrong                           |
| Pain points         | 1. Slow plugin page loads break flow. 2. Session expired with no warning = lost form data. 3. Too many nav items make it hard to find the right plugin |
| Tech literacy       | Medium                                                                                                                                                 |
| Device preference   | Both (desktop in office, tablet on the road)                                                                                                           |
| Accessibility needs | None                                                                                                                                                   |
| Quote               | _"I just want to get to my contacts list and close deals. Don't make me think about infrastructure."_                                                  |

---

### Persona 3: Priya

| Field               | Detail                                                                                                                                                               |
| ------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Name                | Priya                                                                                                                                                                |
| Role                | Plugin developer integrating a custom plugin frontend with the shell                                                                                                 |
| Age range           | 26-40                                                                                                                                                                |
| Goal                | Expose widgets from her plugin that the shell and other plugins can embed, and ensure plugin pages load correctly within the shell's navigation and theming          |
| Pain points         | 1. No clear feedback when widget loading fails. 2. Theme tokens not consistently applied to remote components. 3. Route conflicts are discovered late in development |
| Tech literacy       | High                                                                                                                                                                 |
| Device preference   | Desktop                                                                                                                                                              |
| Accessibility needs | Low vision (uses 150% browser zoom)                                                                                                                                  |
| Quote               | _"My plugin should feel native inside the shell, not like an afterthought in an iframe."_                                                                            |

---

## 2. User Journeys

---

### Journey 1: Marcus â€” Navigating Between Plugin Pages

**Trigger**: Marcus starts his workday and needs to check new contacts in CRM,
then review pending invoices in the Billing plugin.

**Preconditions**:

- Marcus is authenticated and his session is valid
- Tenant has CRM and Billing plugins enabled
- Shell has loaded and sidebar is populated

#### Happy Path

| Step | User Action                                                       | System Response                                                                             | Emotional State                    |
| ---- | ----------------------------------------------------------------- | ------------------------------------------------------------------------------------------- | ---------------------------------- |
| 1    | Opens app URL in browser                                          | Shell loads: header with tenant logo, sidebar with nav items, main area shows dashboard     | ğŸ˜ Neutral â€” familiar layout       |
| 2    | Scans sidebar, sees "Plugins" group expanded with CRM and Billing | Sidebar renders plugin nav items under collapsible "Plugins" section, with icons and labels | ğŸ˜Š Oriented â€” knows where to go    |
| 3    | Clicks "CRM" â†’ "Contacts" in sidebar                              | Sidebar highlights active item; main area shows loading skeleton for CRM Contacts page      | ğŸ˜ Waiting â€” skeleton visible      |
| 4    | CRM remote module loads (~300ms)                                  | Skeleton replaced by CRM Contacts page; data populates                                      | ğŸ˜Š Satisfied â€” fast load           |
| 5    | Works in CRM Contacts for 10 minutes                              | Normal plugin interaction; shell chrome stays stable                                        | ğŸ˜ Focused on task                 |
| 6    | Clicks "Billing" â†’ "Invoices" in sidebar                          | Sidebar highlights new item; CRM unmounts; Billing loading skeleton appears                 | ğŸ˜ Transition â€” expects brief wait |
| 7    | Billing remote module loads (~300ms)                              | Skeleton replaced by Billing Invoices page                                                  | ğŸ˜Š Satisfied â€” seamless transition |

**Outcome**: Marcus navigated between two plugin pages with clear loading
feedback and no blank screens. The sidebar gave him a consistent anchor point
throughout the flow.

**Delight opportunities**:

- Preload the remote entry for the most recently used plugin (LRU) so subsequent visits are instant
- Show breadcrumb trail: Home > Billing > Invoices, so Marcus always knows where he is

---

#### Edge Case A: Plugin Remote Unavailable

**Trigger**: CDN/S3 serving the CRM remote entry is down or returns a network error.

| Step | User Action                          | System Response                                                                                              | Emotional State                 |
| ---- | ------------------------------------ | ------------------------------------------------------------------------------------------------------------ | ------------------------------- |
| 1    | Clicks "CRM" â†’ "Contacts" in sidebar | Loading skeleton appears in main area                                                                        | ğŸ˜ Waiting                      |
| 2    | Remote fetch fails after timeout     | Error boundary replaces skeleton: AlertTriangle icon + "CRM is temporarily unavailable" + "Try again" button | ğŸ˜¤ Frustrated â€” but not lost    |
| 3    | Clicks "Try again"                   | Loading skeleton reappears; retry fetch                                                                      | ğŸ¤” Hopeful                      |
| 4a   | Retry succeeds                       | CRM page loads normally                                                                                      | ğŸ˜Š Relieved                     |
| 4b   | Retry fails again                    | Same error boundary with additional text: "If this persists, contact your administrator"                     | ğŸ˜¡ Frustrated but informed      |
| 5    | Clicks "Billing" in sidebar instead  | Billing loads normally; error boundary is unmounted                                                          | ğŸ˜ Moves on â€” rest of app works |

**Recovery path**: Retry button in error boundary. If persistent, user contacts admin. Shell continues working for all other plugins.
**Feedback**: "CRM is temporarily unavailable. The rest of the application is not affected. [Try again]"

---

#### Edge Case B: Disabled Plugin Route

**Trigger**: Marcus bookmarked `/crm/contacts` but CRM was disabled for his tenant since yesterday.

| Step | User Action                                             | System Response                                                                | Emotional State                |
| ---- | ------------------------------------------------------- | ------------------------------------------------------------------------------ | ------------------------------ |
| 1    | Navigates to `/crm/contacts` directly (bookmark or URL) | Shell loads; route resolver checks enabled plugins; CRM is not in the list     | ğŸ˜• Confused â€” expected content |
| 2    | System renders 404 page                                 | "This feature is not available" page with illustration + "Go to Dashboard" CTA | ğŸ˜ Informed â€” not a broken app |
| 3    | Clicks "Go to Dashboard"                                | Navigates to `/` (dashboard)                                                   | ğŸ˜ Neutral â€” redirected safely |

**Message**: "This feature is not available for your organization. If you believe this is a mistake, contact your administrator."

---

#### Edge Case C: Many Plugins in Sidebar

**Trigger**: Tenant has 12 plugins enabled. Sidebar is longer than the viewport.

| Step | User Action                                   | System Response                                                              | Emotional State                   |
| ---- | --------------------------------------------- | ---------------------------------------------------------------------------- | --------------------------------- |
| 1    | Opens app on 768px tablet                     | Sidebar visible (or hamburger on mobile); "Plugins" group shows all 12 items | ğŸ˜¤ Overwhelmed â€” too many items   |
| 2    | Collapses "Plugins" group                     | Only group header visible; sidebar shortens significantly                    | ğŸ˜Š Manageable â€” less visual noise |
| 3    | Expands again, scrolls to find desired plugin | Sidebar scroll is smooth; active item is highlighted                         | ğŸ˜ Found it                       |

**Delight**: "Recently Used" section at top of sidebar pinning last 3 accessed plugins for quick access.

---

### Journey 2: Dana â€” Customizing Tenant Theme

**Trigger**: Dana's company is rebranding. She needs to update the platform's
logo, primary color, and heading font to match the new brand identity.

**Preconditions**:

- Dana is authenticated as tenant admin
- Tenant settings page is accessible at `/settings/branding`
- Current theme uses default Plexica colors

#### Happy Path

| Step | User Action                                                               | System Response                                                                                                    | Emotional State                               |
| ---- | ------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | --------------------------------------------- |
| 1    | Navigates to Settings > Branding in sidebar                               | Branding settings page loads with current theme values displayed in a form                                         | ğŸ˜ Neutral â€” task-oriented                    |
| 2    | Clicks "Upload Logo" and selects new company logo PNG                     | Preview of the logo appears in the header mockup area; upload progress bar shown                                   | ğŸ˜Š Satisfying â€” instant visual feedback       |
| 3    | Changes primary color from `#0066CC` to `#1976d2` using ColorPicker       | Live preview panel updates: buttons, links, and active sidebar item show new primary color                         | ğŸ˜Š Delighted â€” can see the result immediately |
| 4    | Changes heading font from "Inter" to "Poppins" via font selector          | Preview panel heading text updates to Poppins; body text remains Inter                                             | ğŸ¤” Evaluating â€” does this look right?         |
| 5    | Reviews the ThemePreview component showing header + sidebar + card mockup | Preview reflects all changes together: logo, colors, fonts                                                         | ğŸ˜Š Confident â€” this looks like our brand      |
| 6    | Clicks "Save Changes"                                                     | Toast: "Theme updated successfully. Users will see changes on their next page load." Spinner on button during save | ğŸ‰ Satisfied â€” done in one session            |
| 7    | Refreshes the page                                                        | Shell applies the new theme. Header shows new logo, primary color is #1976d2, headings use Poppins                 | ğŸ‰ Proud â€” it's our product now               |

**Outcome**: Dana updated the tenant's visual identity in a single session with
real-time preview. No guesswork about how changes would look.

**Delight opportunities**:

- "Reset to default" button in case changes go wrong
- Contrast checker next to ColorPicker showing WCAG pass/fail for selected color against white/dark backgrounds
- Font preview showing sample text in chosen fonts before saving

---

#### Edge Case A: Invalid Theme Colors

**Trigger**: Dana enters an invalid hex value or selects a color with insufficient contrast.

| Step | User Action                             | System Response                                                                                                                                                       | Emotional State                           |
| ---- | --------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------- |
| 1    | Types `#xyz` in the primary color input | Inline validation error: "Invalid hex color value. Use format: #RRGGBB"                                                                                               | ğŸ˜¤ Annoyed â€” typo                         |
| 2    | Corrects to `#FFFF00` (bright yellow)   | Color applied to preview; contrast warning appears: "Primary text on this background has a contrast ratio of 1.2:1 (minimum 4.5:1). This may make text hard to read." | ğŸ¤” Informed â€” didn't realize              |
| 3    | Adjusts to `#B8860B` (dark goldenrod)   | Contrast checker updates: "4.6:1 â€” Passes WCAG AA" with green checkmark                                                                                               | ğŸ˜Š Relieved â€” guided to accessible choice |

**Recovery path**: Contrast warnings are advisory (non-blocking). "Save" is still available, but warns: "Some color combinations may not meet accessibility standards."
**Feedback**: Inline validation on color inputs. Contrast checker next to each color token.

---

#### Edge Case B: Theme API Error

**Trigger**: The PUT request to save theme settings fails (server error or network issue).

| Step | User Action                         | System Response                                                                                                        | Emotional State                  |
| ---- | ----------------------------------- | ---------------------------------------------------------------------------------------------------------------------- | -------------------------------- |
| 1    | Clicks "Save Changes"               | Button shows loading spinner                                                                                           | ğŸ˜ Waiting                       |
| 2    | API returns 500                     | Toast error: "Unable to save theme changes. Please try again." Button returns to normal state. Form data is preserved. | ğŸ˜¤ Frustrated â€” but no data lost |
| 3    | Clicks "Save Changes" again (retry) | Save succeeds                                                                                                          | ğŸ˜Š Relieved                      |

**Feedback**: "Unable to save theme changes. Please try again. If the problem continues, contact support."

---

#### Edge Case C: Permission Denied (Non-Admin)

**Trigger**: Marcus (regular user) navigates to `/settings/branding` directly.

| Step | User Action                         | System Response                                                                                                                                          | Emotional State                |
| ---- | ----------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------ |
| 1    | Navigates to `/settings/branding`   | Permission check fails; 403 response                                                                                                                     | ğŸ˜• Confused                    |
| 2    | System shows permission denied page | "You don't have permission to manage branding settings. This page requires the Tenant Admin role. Contact your organization's administrator for access." | ğŸ˜ Informed â€” knows what to do |

**Message**: "You don't have permission to manage branding settings. This page requires the Tenant Admin role."

---

### Journey 3: Dana â€” Session Expires During Work

**Trigger**: Dana has been working for 8 hours. Her access token is about to
expire and the refresh token has also expired (24h inactivity timeout reached
because she left a tab open overnight).

**Preconditions**:

- Dana was authenticated and working earlier
- Token refresh interval is running in the shell
- Browser tab was open but inactive for >24 hours

#### Happy Path (Silent Refresh)

| Step | User Action                                        | System Response                                                                                 | Emotional State               |
| ---- | -------------------------------------------------- | ----------------------------------------------------------------------------------------------- | ----------------------------- |
| 1    | Working in CRM plugin page, editing a contact form | Shell's background timer detects token expiring in 60 seconds                                   | ğŸ˜ Unaware â€” working normally |
| 2    | (No user action needed)                            | Shell silently calls `POST /api/v1/auth/refresh` with refresh token. New access token received. | ğŸ˜ Still unaware â€” seamless   |
| 3    | Continues working without interruption             | All subsequent API calls use the new token                                                      | ğŸ˜Š Happy â€” nothing broke      |

**Outcome**: Session was silently renewed. Dana never noticed. This is the ideal UX.

---

#### Edge Case A: Full Session Expiry (Refresh Token Expired)

**Trigger**: Refresh token has also expired (24h inactivity or Keycloak session timeout).

| Step | User Action                               | System Response                                                                                                                              | Emotional State                                |
| ---- | ----------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
| 1    | Clicks "Save" on a form in the CRM plugin | API call returns 401 AUTH_TOKEN_EXPIRED                                                                                                      | ğŸ˜ Was working                                 |
| 2    | Shell intercepts the 401 response         | SessionExpiredModal appears (non-dismissable overlay): "Your session has expired. Please sign in again to continue." with a "Sign In" button | ğŸ˜¤ Frustrated â€” was in the middle of something |
| 3    | Clicks "Sign In"                          | Modal stays visible. Browser navigates to `/auth/login` with `redirect_uri` set to the current page URL                                      | ğŸ¤” Hoping saved work isn't lost                |
| 4    | Re-authenticates via Keycloak             | Callback processes; user is redirected back to the original page                                                                             | ğŸ˜Š Relieved â€” back where they were             |

**Recovery path**: `redirect_uri` preserves the user's location. Form data cannot be preserved (limitation noted in spec). SessionExpiredModal is non-dismissable â€” no accidental navigation away.
**Feedback**: "Your session has expired. Please sign in again to continue. You will be returned to this page after signing in."

---

#### Edge Case B: Token Refresh Fails (Keycloak Down)

**Trigger**: Shell attempts silent refresh but Keycloak is temporarily unreachable.

| Step | User Action                                        | System Response                                                                                            | Emotional State                 |
| ---- | -------------------------------------------------- | ---------------------------------------------------------------------------------------------------------- | ------------------------------- |
| 1    | (Background) Shell timer triggers refresh          | `POST /api/v1/auth/refresh` fails (500 or network error)                                                   | ğŸ˜ Unaware                      |
| 2    | (Background) Shell retries refresh after 5 seconds | Retry also fails                                                                                           | ğŸ˜ Still unaware                |
| 3    | Shell shows subtle warning banner at top of page   | Yellow banner: "Unable to refresh your session. Your current session will remain active until it expires." | ğŸ¤” Slightly concerned           |
| 4    | Dana continues working with existing token         | API calls succeed (token not yet expired)                                                                  | ğŸ˜ Cautious                     |
| 5    | Token finally expires                              | Standard session expired flow (Edge Case A above)                                                          | ğŸ˜¤ Expected it based on warning |

**Feedback**: Warning banner (non-blocking): "Unable to refresh your session. Your current session will remain active until it expires."

---

### Journey 4: Priya â€” Widget Embedding Across Plugins

**Trigger**: Priya is building a Project Management plugin that needs to embed
the CRM plugin's `ContactCard` widget to show related contacts on a project page.

**Preconditions**:

- CRM plugin is enabled and exposes `ContactCard` widget via Module Federation
- Project Management plugin has imported the widget reference
- Both plugins are loaded in the same tenant's shell

#### Happy Path

| Step | User Action                                                     | System Response                                                                                                     | Emotional State                               |
| ---- | --------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------- | --------------------------------------------- |
| 1    | Marcus navigates to Project > "Acme Redesign" page in PM plugin | Project page loads. "Related Contacts" section shows loading skeleton for CRM ContactCard widgets                   | ğŸ˜ Waiting â€” skeleton visible                 |
| 2    | CRM remote loads `ContactCard` widget module                    | Two ContactCard widgets render inline: "John Smith" and "Jane Doe" with avatars, emails, and call-to-action buttons | ğŸ˜Š Delighted â€” cross-plugin integration works |
| 3    | Hovers over "John Smith" ContactCard                            | Card shows subtle elevation change (shadow-md). "View in CRM" link appears                                          | ğŸ˜ Exploring                                  |
| 4    | Clicks "View in CRM" link                                       | Shell navigates to `/crm/contacts/john-smith-uuid`. CRM Contacts detail page loads                                  | ğŸ˜Š Seamless â€” moved between plugins naturally |

**Outcome**: Widget from CRM plugin rendered natively inside PM plugin's page.
Tenant theming was applied to the widget. Navigation between plugins was seamless.

---

#### Edge Case A: Widget Remote Unavailable

**Trigger**: CRM plugin's remote entry is down. The ContactCard widget cannot be loaded.

| Step | User Action                                        | System Response                                                                                    | Emotional State                                |
| ---- | -------------------------------------------------- | -------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
| 1    | Opens Project page with "Related Contacts" section | Widget loading attempts; fetch fails                                                               | ğŸ˜ Waiting                                     |
| 2    | Error boundary catches the widget load failure     | Fallback placeholder: gray card with `AlertCircle` icon and text "Contact information unavailable" | ğŸ˜¤ Disappointed â€” but project page still works |
| 3    | Continues working on the rest of the project page  | All other page content functions normally                                                          | ğŸ˜ Manageable â€” widget failure is contained    |

**Recovery path**: Fallback placeholder is static. Refreshing the page retries the widget load.
**Feedback**: "Contact information unavailable. Refresh the page to try again."

---

#### Edge Case B: Widget Version Mismatch

**Trigger**: CRM plugin was updated and the `ContactCard` widget API changed, but
PM plugin hasn't been updated to match.

| Step | User Action                                            | System Response                                                                                   | Emotional State                    |
| ---- | ------------------------------------------------------ | ------------------------------------------------------------------------------------------------- | ---------------------------------- |
| 1    | Opens Project page                                     | Module Federation attempts to resolve `ContactCard` from CRM remote                               | ğŸ˜ Waiting                         |
| 2    | Version resolution fails or widget renders incorrectly | Error boundary catches: "Contact card could not be displayed. The CRM plugin may need an update." | ğŸ˜¤ Frustrated â€” something is wrong |
| 3    | Reports to tenant admin (Dana)                         | Dana checks plugin versions in admin panel                                                        | ğŸ˜ Informed â€” clear error message  |

**Feedback**: "Contact card could not be displayed. The CRM plugin may need an update. Contact your administrator."

---

## 3. Journey Flow Diagram

```
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚    Shell App Load    â”‚
                              â”‚  (Auth Context Init) â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚   Token Valid?             â”‚
                           â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚ YES       â”‚ NO
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Load Shell    â”‚  â”‚ Redirect to Login   â”‚
                        â”‚ Layout +      â”‚  â”‚ (Keycloak OAuth)    â”‚
                        â”‚ Sidebar       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                            â”‚                        â”‚ Callback
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Render Plugin   â”‚     â”‚ Set Token + Return  â”‚
                   â”‚ Nav from        â”‚     â”‚ to Original Route   â”‚
                   â”‚ /tenant/plugins â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ User Clicks Plugin Nav    â”‚
          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚          â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Plugin      â”‚  â”‚ Plugin disabled?  â”‚
    â”‚ Enabled     â”‚  â”‚ â†’ 404 Page        â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Load Remote Entry  â”‚
    â”‚ (Module Federation)â”‚
    â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚ SUCCESS  â”‚ FAIL
  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Render  â”‚  â”‚ Error Boundary   â”‚
  â”‚ Plugin  â”‚  â”‚ "Plugin          â”‚
  â”‚ Page    â”‚  â”‚  unavailable"    â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚ [Try Again]      â”‚
       â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ During Session:         â”‚
  â”‚  Background token       â”‚
  â”‚  refresh (silent)       â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ OK       â”‚ FAIL
  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚Continue â”‚  â”‚ Refresh fails?  â”‚
  â”‚ working â”‚  â”‚ â†’ Warning bannerâ”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ Token expires?  â”‚
               â”‚ â†’ Session       â”‚
               â”‚   Expired Modal â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Cross-References

| Artifact                                 | Path                                                     |
| ---------------------------------------- | -------------------------------------------------------- |
| Feature spec                             | `.forge/specs/005-frontend-architecture/spec.md`         |
| Design spec                              | `.forge/specs/005-frontend-architecture/design-spec.md`  |
| Constitution                             | `.forge/constitution.md`                                 |
| Design system                            | `.forge/ux/design-system.md`                             |
| Spec 010 (Frontend Production Readiness) | `.forge/specs/010-frontend-production-readiness/spec.md` |
