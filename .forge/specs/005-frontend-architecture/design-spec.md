# Design Spec: Frontend Architecture (App Shell)

> **Spec reference**: `.forge/specs/005-frontend-architecture/spec.md`
> **Generated by**: `/forge-ux`
> **Date**: 2026-02-26
> **Status**: Draft

---

## 1. Overview

| Field           | Value                                                                            |
| --------------- | -------------------------------------------------------------------------------- |
| Feature         | Frontend Architecture ‚Äî App Shell, Plugin Loading, Theming, Widgets, Auth States |
| Spec ID         | 005-frontend-architecture                                                        |
| Platform        | Web SPA (React 19 + Vite + TanStack Router)                                      |
| Viewports       | Desktop (1440px), Tablet (1024px), Tablet portrait (768px), Mobile (375px)       |
| Design system   | Existing `@plexica/ui` + Tailwind CSS v4 semantic tokens (design-system.md v1.1) |
| Design approach | Desktop-first responsive                                                         |
| Dark mode       | Required (light + dark tokens already defined in design system)                  |
| FRs covered     | FR-001 through FR-015                                                            |

---

## 2. Screen Inventory

| #   | Screen Name             | Entry Point                       | Primary User Action                                       | FR Ref                         | Status |
| --- | ----------------------- | --------------------------------- | --------------------------------------------------------- | ------------------------------ | ------ |
| 1   | App Shell Layout        | App root `/`                      | Navigate between core and plugin pages                    | FR-006, FR-007, FR-008         | New    |
| 2   | Plugin Page Loading     | Click plugin nav item             | Wait for remote module, then interact with plugin content | FR-002, FR-003, FR-004, FR-005 | New    |
| 3   | Plugin Error Boundary   | Plugin remote fails               | Read error, retry, or navigate away                       | FR-005                         | New    |
| 4   | Disabled Plugin (404)   | Navigate to disabled plugin URL   | Understand unavailability, return to dashboard            | FR-008                         | New    |
| 5   | Tenant Theme Settings   | `/settings/branding` (admin only) | Configure logo, colors, fonts for tenant                  | FR-009, FR-010, FR-015         | New    |
| 6   | Session Expired Modal   | Token expiry event                | Re-authenticate and return to previous page               | FR-013, FR-014                 | New    |
| 7   | Auth Warning Banner     | Refresh failure event             | Be aware of upcoming session issues                       | FR-013                         | New    |
| 8   | Widget Embed (in-page)  | Plugin page with embedded widget  | Interact with cross-plugin widget content                 | FR-011                         | New    |
| 9   | Widget Fallback         | Widget remote fails               | Understand unavailability                                 | FR-011                         | New    |
| 10  | Permission Denied (403) | Navigate to restricted route      | Understand lack of permission, return to dashboard        | FR-008, FR-009                 | New    |

---

## 3. Wireframes

### Screen 1: App Shell Layout

**Source**: FR-006, FR-007, FR-008 | **Type**: New

```
+==================================================================+  W: 1440px
|  [TenantLogo]  Plexica          [üîî] [üåê EN ‚ñæ] [üë§ Dana ‚ñæ]     |
+==================================================================+
|          |                                                        |
| SIDEBAR  |  MAIN CONTENT AREA                                    |
| W: 260px |  W: 1180px                                            |
|          |                                                        |
| ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê |  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  |
| ‚îÇ üè†   ‚îÇ |  ‚îÇ [Breadcrumb: Home > Dashboard]                  ‚îÇ  |
| ‚îÇ Dash- ‚îÇ |  ‚îÇ                                                  ‚îÇ  |
| ‚îÇ board ‚îÇ |  ‚îÇ [Page Title: Dashboard]                          ‚îÇ  |
| ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ |  ‚îÇ                                                  ‚îÇ  |
| ‚îÇ üë§   ‚îÇ |  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ  |
| ‚îÇ Pro-  ‚îÇ |  ‚îÇ  ‚îÇ StatCard ‚îÇ ‚îÇ StatCard ‚îÇ ‚îÇ StatCard ‚îÇ         ‚îÇ  |
| ‚îÇ file  ‚îÇ |  ‚îÇ  ‚îÇ Users:25 ‚îÇ ‚îÇ Plugins:4‚îÇ ‚îÇ Spaces:8 ‚îÇ         ‚îÇ  |
| ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ |  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ  |
| ‚îÇ ‚öôÔ∏è   ‚îÇ |  ‚îÇ                                                  ‚îÇ  |
| ‚îÇ Set-  ‚îÇ |  ‚îÇ  [Content varies by route]                      ‚îÇ  |
| ‚îÇ tings ‚îÇ |  ‚îÇ                                                  ‚îÇ  |
| ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ |  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  |
| ‚îÇ      ‚îÇ |                                                        |
| ‚îÇ PLUG- ‚îÇ |                                                        |
| ‚îÇ INS   ‚îÇ |                                                        |
| ‚îÇ [‚ñæ]   ‚îÇ |                                                        |
| ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ |                                                        |
| ‚îÇ ‚îÇüìä ‚îÇ‚îÇ |                                                        |
| ‚îÇ ‚îÇCRM ‚îÇ‚îÇ |                                                        |
| ‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚îÇ |                                                        |
| ‚îÇ ‚îÇüí∞ ‚îÇ‚îÇ |                                                        |
| ‚îÇ ‚îÇBill-‚îÇ‚îÇ |                                                        |
| ‚îÇ ‚îÇing  ‚îÇ‚îÇ |                                                        |
| ‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚îÇ |                                                        |
| ‚îÇ ‚îÇüìã ‚îÇ‚îÇ |                                                        |
| ‚îÇ ‚îÇPro- ‚îÇ‚îÇ |                                                        |
| ‚îÇ ‚îÇject ‚îÇ‚îÇ |                                                        |
| ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ |                                                        |
| ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò |                                                        |
|          |  [Footer: ¬© 2026 Plexica ¬∑ Help ¬∑ Privacy]              |
+==================================================================+
```

**Tablet (768px)**:

```
+======================================+  W: 768px
| [‚â°] [TenantLogo] Plexica  [üîî] [üë§] |
+======================================+
|                                      |
|  [Breadcrumb: Home > Dashboard]      |
|                                      |
|  [Page Title: Dashboard]             |
|                                      |
|  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       |
|  ‚îÇ StatCard   ‚îÇ ‚îÇ StatCard   ‚îÇ       |
|  ‚îÇ Users: 25  ‚îÇ ‚îÇ Plugins: 4 ‚îÇ       |
|  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       |
|  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      |
|  ‚îÇ StatCard   ‚îÇ                      |
|  ‚îÇ Spaces: 8  ‚îÇ                      |
|  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      |
|                                      |
|  [Content varies by route]           |
|                                      |
+======================================+

‚â° tap ‚Üí Sidebar slides in as overlay (left):
+================+=====================+
| SIDEBAR        |                     |
| (overlay)      |  (dimmed            |
| W: 280px       |   background)       |
|                |                     |
| üè† Dashboard   |                     |
| üë§ Profile     |                     |
| ‚öôÔ∏è Settings    |                     |
| ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  |                     |
| PLUGINS [‚ñæ]    |                     |
|  üìä CRM       |                     |
|  üí∞ Billing   |                     |
|  üìã Project   |                     |
|                |                     |
| [‚úï Close]      |                     |
+================+=====================+
```

**Mobile (375px)**:

```
+====================+  W: 375px
| [‚â°] [Logo] [üîî][üë§]|
+====================+
|                    |
| Dashboard          |
|                    |
| ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê |
| ‚îÇ StatCard       ‚îÇ |
| ‚îÇ Users: 25      ‚îÇ |
| ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò |
| ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê |
| ‚îÇ StatCard       ‚îÇ |
| ‚îÇ Plugins: 4     ‚îÇ |
| ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò |
| ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê |
| ‚îÇ StatCard       ‚îÇ |
| ‚îÇ Spaces: 8      ‚îÇ |
| ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò |
|                    |
+====================+
```

#### State Inventory

| State                      | Trigger                      | Visual Change                                            | User Feedback            |
| -------------------------- | ---------------------------- | -------------------------------------------------------- | ------------------------ |
| Default                    | App load complete            | Full shell with sidebar + content                        | ‚Äî                        |
| Loading (initial)          | App first load               | Skeleton header + sidebar skeleton + content skeleton    | "Loading..." sr-only     |
| Sidebar collapsed          | Mobile/tablet or user toggle | Sidebar hidden; hamburger icon shown                     | ‚Äî                        |
| Sidebar expanded (overlay) | Hamburger click on mobile    | Sidebar slides in from left; background dimmed           | Focus trapped in sidebar |
| Theme applied              | Login + tenant theme fetch   | CSS custom properties set from tenant theme; logo loaded | ‚Äî                        |
| Dark mode                  | User or system preference    | All tokens switch to dark mode values                    | ‚Äî                        |

> **Wireframe Scope Note**: Elements shown in the header wireframe that are **outside Spec 005 scope**:
>
> - üîî Notification bell ‚Äî pre-existing feature (or future feature, not implemented by this spec)
> - üåê Language selector ‚Äî owned by Spec 006 (i18n System, already implemented Sprint 1‚Äì2)
>
> These elements appear in wireframes for visual completeness only. T005-22 (ARIA audit) should only verify landmarks and labels for elements **within Spec 005 scope** (SidebarNav, Breadcrumbs, main content area).

#### Interactive Elements

| Element                    | Type   | Action | Outcome                                  | FR Ref          |
| -------------------------- | ------ | ------ | ---------------------------------------- | --------------- |
| Tenant Logo                | Image  | Click  | Navigate to `/` (dashboard)              | FR-006          |
| Hamburger (‚â°)              | Button | Click  | Toggle sidebar overlay (mobile/tablet)   | FR-006, NFR-005 |
| Notification Bell (üîî)     | Button | Click  | Open notification dropdown               | FR-006          |
| Language Selector (üåê)     | Select | Change | Switch locale (per i18n spec 006)        | FR-006          |
| User Menu (üë§)             | Button | Click  | Open dropdown: Profile, Settings, Logout | FR-006, FR-012  |
| Dashboard nav item         | Link   | Click  | Navigate to `/`                          | FR-006          |
| Profile nav item           | Link   | Click  | Navigate to `/profile`                   | FR-008          |
| Settings nav item          | Link   | Click  | Navigate to `/settings`                  | FR-008          |
| Plugins group toggle (‚ñæ)   | Button | Click  | Collapse/expand plugins section          | FR-007          |
| Plugin nav item (e.g. CRM) | Link   | Click  | Navigate to `/{pluginId}` route prefix   | FR-007          |
| Breadcrumb links           | Link   | Click  | Navigate to parent route                 | FR-006          |

#### Responsive Notes

- **1440px**: Sidebar always visible (260px). Main content 1180px. StatCards in 3-column grid.
- **1024px**: Sidebar always visible (240px). Main content adapts. StatCards in 2-column grid.
- **768px**: Sidebar hidden by default. Hamburger icon in header. Sidebar opens as overlay with dimmed background. StatCards in 2-column grid.
- **375px**: Sidebar hidden. Hamburger in header. StatCards stack vertically (1 column). User menu collapses to avatar icon only.

#### Accessibility

```
Role: application shell
Landmarks:
  <header role="banner">: Top navigation bar
  <nav role="navigation" aria-label="Main navigation">: Sidebar
  <main role="main">: Content area
  <footer role="contentinfo">: Footer

Heading hierarchy:
  h1: [Current page title, e.g., "Dashboard"]
  h2: [Section headings within page content]

Tab order:
  [1] Skip to main content link (visually hidden until focused)
  [2] Tenant logo (home link)
  [3] Notification bell
  [4] Language selector
  [5] User menu
  [6] Sidebar nav items (top to bottom)
  [7] Main content area elements

Focus trap: Yes ‚Äî when sidebar overlay is open on mobile/tablet
  Esc: closes sidebar overlay

ARIA:
  Sidebar nav: aria-label="Main navigation"
  Plugins group: aria-expanded="true|false", role="group", aria-label="Plugins"
  Active nav item: aria-current="page"
  User menu button: aria-haspopup="true", aria-expanded="true|false"
  Notification bell: aria-label="Notifications"
  Language selector: aria-label="Select language"
  Skip link: <a href="#main-content" class="sr-only focus:not-sr-only">Skip to main content</a>
  Sidebar overlay: aria-modal="true" (on mobile)
  Sidebar close: aria-label="Close navigation"

Contrast (light mode):
  Foreground (#0A0A0A) on Background (#FFFFFF): 17.4:1 ‚úì
  Muted foreground (#71717A) on Background (#FFFFFF): 4.7:1 ‚úì
  Primary foreground (#FFFFFF) on Primary (#0066CC): 5.3:1 ‚úì
  Active nav item uses --primary background with --primary-foreground text

Contrast (dark mode):
  Foreground (#FAFAFA) on Background (#0A0A0A): 17.4:1 ‚úì
  Muted foreground (#A1A1AA) on Background (#0A0A0A): 4.6:1 ‚úì
  Primary foreground (#FFFFFF) on Primary (#3B82F6): 4.6:1 ‚úì

Keyboard:
  Tab: Moves through focusable elements in tab order
  Enter/Space: Activates buttons, follows links
  Esc: Closes sidebar overlay, user menu dropdown
  Arrow Up/Down: Navigate within dropdown menus
  Home/End: Jump to first/last item in sidebar nav

Screen reader flow:
  1. "Plexica, application" (banner landmark)
  2. "Skip to main content" (skip link, visible on focus)
  3. "Main navigation" (nav landmark)
  4. "Dashboard, link, current page" (active nav)
  5. "Plugins, group, expanded" (collapsible group)
  6. "CRM, link" ‚Üí "Billing, link" (plugin items)
  7. "[Page title]" (h1 in main area)
```

---

### Screen 2: Plugin Page Loading

**Source**: FR-002, FR-003, FR-004 | **Type**: New

```
+==================================================================+  W: 1440px
|  [TenantLogo]  Plexica          [üîî] [üåê EN ‚ñæ] [üë§ Dana ‚ñæ]     |
+==================================================================+
|          |                                                        |
| SIDEBAR  |  MAIN CONTENT AREA                                    |
|          |                                                        |
| üè† Dash  |  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  |
| üë§ Prof  |  ‚îÇ [Breadcrumb: Home > CRM > Contacts]              ‚îÇ  |
| ‚öôÔ∏è Set   |  ‚îÇ                                                  ‚îÇ  |
| ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  |  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ  |
| PLUGINS   |  ‚îÇ ‚îÇ ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚îÇ   ‚îÇ  |
| ‚ñ∏ [üìä    |  ‚îÇ ‚îÇ ‚ñë‚ñë‚ñë‚ñë SKELETON LOADING STATE ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚îÇ   ‚îÇ  |
|   CRM]*   |  ‚îÇ ‚îÇ ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚îÇ   ‚îÇ  |
| ‚ñ∏ üí∞     |  ‚îÇ ‚îÇ                                            ‚îÇ   ‚îÇ  |
|   Bill    |  ‚îÇ ‚îÇ ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚îÇ   ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚îÇ   ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚îÇ   ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ‚îÇ   ‚îÇ  |
|           |  ‚îÇ ‚îÇ                                            ‚îÇ   ‚îÇ  |
|           |  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ  |
|           |  ‚îÇ                                                  ‚îÇ  |
|           |  ‚îÇ [Spinner] Loading CRM...                          ‚îÇ  |
|           |  ‚îÇ                                                  ‚îÇ  |
|           |  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  |
|           |                                                        |
+==================================================================+
  * = active nav item (highlighted with --primary background)

After remote loads (~300ms):

+==================================================================+
|  [TenantLogo]  Plexica          [üîî] [üåê EN ‚ñæ] [üë§ Dana ‚ñæ]     |
+==================================================================+
|          |                                                        |
| SIDEBAR  |  MAIN CONTENT AREA                                    |
|          |                                                        |
| üè† Dash  |  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  |
| üë§ Prof  |  ‚îÇ [Breadcrumb: Home > CRM > Contacts]              ‚îÇ  |
| ‚öôÔ∏è Set   |  ‚îÇ                                                  ‚îÇ  |
| ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  |  ‚îÇ [CRM Contacts Page ‚Äî Plugin Content]             ‚îÇ  |
| PLUGINS   |  ‚îÇ                                                  ‚îÇ  |
| ‚ñ∏ [üìä    |  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  |
|   CRM]*   |  ‚îÇ ‚îÇ Search ‚îÇ ‚îÇ [Search___________________] üîç  ‚îÇ  ‚îÇ  |
| ‚ñ∏ üí∞     |  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  |
|   Bill    |  ‚îÇ                                                  ‚îÇ  |
|           |  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  |
|           |  ‚îÇ ‚îÇ Name        ‚îÇ Email          ‚îÇ Phone       ‚îÇ  ‚îÇ  |
|           |  ‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ  |
|           |  ‚îÇ ‚îÇ John Smith  ‚îÇ john@acme.com  ‚îÇ 555-1234    ‚îÇ  ‚îÇ  |
|           |  ‚îÇ ‚îÇ Jane Doe    ‚îÇ jane@acme.com  ‚îÇ 555-5678    ‚îÇ  ‚îÇ  |
|           |  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  |
|           |  ‚îÇ                                                  ‚îÇ  |
|           |  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  |
+==================================================================+
```

#### State Inventory

| State   | Trigger                        | Visual Change                                                                                    | User Feedback                              |
| ------- | ------------------------------ | ------------------------------------------------------------------------------------------------ | ------------------------------------------ |
| Loading | Nav click to plugin route      | Skeleton placeholders in content area + small spinner with "Loading [Plugin Name]..." text below | aria-live="polite" announces "Loading CRM" |
| Loaded  | Remote entry fetched + mounted | Skeleton replaced by plugin content. No layout shift.                                            | aria-live="polite" announces "CRM loaded"  |
| Error   | Remote fetch failure           | Error boundary (see Screen 3)                                                                    | ‚Äî                                          |

#### Interactive Elements

| Element          | Type | Action | Outcome                                       | FR Ref         |
| ---------------- | ---- | ------ | --------------------------------------------- | -------------- |
| Plugin nav item  | Link | Click  | Navigate to plugin route; trigger remote load | FR-004, FR-007 |
| Breadcrumb links | Link | Click  | Navigate to parent route                      | FR-006         |

#### Accessibility

```
Role: main content region with React.Suspense boundary

ARIA:
  Loading skeleton: aria-busy="true" on content container
  Loading text: aria-live="polite", aria-atomic="true"
  On load complete: aria-busy="false"; focus moves to plugin's h1

Screen reader flow:
  1. "Loading CRM" (announced via aria-live)
  2. (wait for load)
  3. "CRM loaded" (announced via aria-live)
  4. Focus moves to plugin page heading
```

---

### Screen 3: Plugin Error Boundary

**Source**: FR-005 | **Type**: New

```
+==================================================================+  W: 1440px
|  [TenantLogo]  Plexica          [üîî] [üåê EN ‚ñæ] [üë§ Dana ‚ñæ]     |
+==================================================================+
|          |                                                        |
| SIDEBAR  |  MAIN CONTENT AREA                                    |
|          |                                                        |
| üè† Dash  |  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  |
| üë§ Prof  |  ‚îÇ                                                  ‚îÇ  |
| ‚öôÔ∏è Set   |  ‚îÇ                                                  ‚îÇ  |
| ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  |  ‚îÇ           ‚ö†Ô∏è                                     ‚îÇ  |
| PLUGINS   |  ‚îÇ                                                  ‚îÇ  |
| ‚ñ∏ [üìä    |  ‚îÇ   CRM is temporarily unavailable                 ‚îÇ  |
|   CRM]*   |  ‚îÇ                                                  ‚îÇ  |
| ‚ñ∏ üí∞     |  ‚îÇ   The plugin could not be loaded. The rest of     ‚îÇ  |
|   Bill    |  ‚îÇ   the application is not affected.                ‚îÇ  |
|           |  ‚îÇ                                                  ‚îÇ  |
|           |  ‚îÇ   [ üîÑ Try Again ]    [ üè† Go to Dashboard ]     ‚îÇ  |
|           |  ‚îÇ                                                  ‚îÇ  |
|           |  ‚îÇ   If this problem continues, contact your         ‚îÇ  |
|           |  ‚îÇ   administrator.                                  ‚îÇ  |
|           |  ‚îÇ                                                  ‚îÇ  |
|           |  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  |
|           |                                                        |
+==================================================================+
```

#### State Inventory

| State           | Trigger                     | Visual Change                                                                                | User Feedback                         |
| --------------- | --------------------------- | -------------------------------------------------------------------------------------------- | ------------------------------------- |
| Error (initial) | Remote fetch failed         | Error card centered in content area with AlertTriangle icon, message, and two action buttons | Screen reader announces error message |
| Retrying        | "Try Again" clicked         | Skeleton loading state replaces error card                                                   | "Retrying..." announced               |
| Retry success   | Remote loads after retry    | Plugin page renders normally                                                                 | "CRM loaded" announced                |
| Retry failure   | Remote fails again on retry | Error card returns with unchanged content                                                    | Error re-announced                    |

#### Interactive Elements

| Element                | Type               | Action | Outcome                                            | FR Ref |
| ---------------------- | ------------------ | ------ | -------------------------------------------------- | ------ |
| Try Again button       | Button (secondary) | Click  | Re-attempt remote module fetch; show loading state | FR-005 |
| Go to Dashboard button | Button (primary)   | Click  | Navigate to `/`                                    | FR-005 |

#### Accessibility

```
Role: alert region

ARIA:
  Error container: role="alert", aria-live="assertive"
  Error heading: aria-level="1"
  Try Again button: aria-label="Retry loading CRM plugin"
  Dashboard button: aria-label="Return to dashboard"

Tab order:
  [1] Try Again button
  [2] Go to Dashboard button

Contrast:
  AlertTriangle icon (#D97706 on #FFFFFF): 4.5:1 ‚úì
  Error text (#0A0A0A on #FFFFFF): 17.4:1 ‚úì

Keyboard:
  Enter/Space on Try Again: triggers retry
  Enter/Space on Dashboard: navigates to /

Screen reader flow:
  1. "Alert: CRM is temporarily unavailable"
  2. "The plugin could not be loaded. The rest of the application is not affected."
  3. "Retry loading CRM plugin, button"
  4. "Return to dashboard, button"
```

---

### Screen 4: Disabled Plugin (404)

**Source**: FR-008 | **Type**: New

```
+==================================================================+  W: 1440px
|  [TenantLogo]  Plexica          [üîî] [üåê EN ‚ñæ] [üë§ Dana ‚ñæ]     |
+==================================================================+
|          |                                                        |
| SIDEBAR  |  MAIN CONTENT AREA                                    |
|          |                                                        |
| üè† Dash  |  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  |
| üë§ Prof  |  ‚îÇ                                                  ‚îÇ  |
| ‚öôÔ∏è Set   |  ‚îÇ                                                  ‚îÇ  |
| ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  |  ‚îÇ           üîç                                     ‚îÇ  |
| PLUGINS   |  ‚îÇ                                                  ‚îÇ  |
| (CRM not  |  ‚îÇ   Page Not Found                                 ‚îÇ  |
|  listed)  |  ‚îÇ                                                  ‚îÇ  |
|  üí∞ Bill  |  ‚îÇ   This feature is not available for your          ‚îÇ  |
|           |  ‚îÇ   organization. If you believe this is a           ‚îÇ  |
|           |  ‚îÇ   mistake, contact your administrator.             ‚îÇ  |
|           |  ‚îÇ                                                  ‚îÇ  |
|           |  ‚îÇ   [ üè† Go to Dashboard ]                          ‚îÇ  |
|           |  ‚îÇ                                                  ‚îÇ  |
|           |  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  |
|           |                                                        |
+==================================================================+
```

#### State Inventory

| State | Trigger                                 | Visual Change                                                      | User Feedback                            |
| ----- | --------------------------------------- | ------------------------------------------------------------------ | ---------------------------------------- |
| 404   | Route not matched to any enabled plugin | 404 page with Search icon, heading, explanation, and dashboard CTA | Screen reader announces "Page Not Found" |

#### Interactive Elements

| Element         | Type             | Action | Outcome         | FR Ref |
| --------------- | ---------------- | ------ | --------------- | ------ |
| Go to Dashboard | Button (primary) | Click  | Navigate to `/` | FR-008 |

#### Accessibility

```
Role: main content

ARIA:
  Page heading: h1 "Page Not Found"
  Dashboard button: aria-label="Return to dashboard"

Keyboard:
  Tab to Dashboard button; Enter/Space activates

Screen reader flow:
  1. "Page Not Found, heading level 1"
  2. "This feature is not available for your organization..."
  3. "Return to dashboard, button"
```

---

### Screen 5: Tenant Theme Settings

**Source**: FR-009, FR-010, FR-015 | **Type**: New

```
+==================================================================+  W: 1440px
|  [TenantLogo]  Plexica          [üîî] [üåê EN ‚ñæ] [üë§ Dana ‚ñæ]     |
+==================================================================+
|          |                                                        |
| SIDEBAR  |  MAIN CONTENT AREA                                    |
|          |                                                        |
| üè† Dash  |  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  |
| üë§ Prof  |  ‚îÇ [Breadcrumb: Home > Settings > Branding]         ‚îÇ  |
| ‚öôÔ∏è [Set  |  ‚îÇ                                                  ‚îÇ  |
|   tings]*|  ‚îÇ Branding Settings                                ‚îÇ  |
| ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  |  ‚îÇ Customize your organization's appearance          ‚îÇ  |
| PLUGINS   |  ‚îÇ                                                  ‚îÇ  |
| ‚ñ∏ üìäCRM  |  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ FORM PANEL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ LIVE PREVIEW ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  |
| ‚ñ∏ üí∞Bill |  ‚îÇ ‚îÇ                          ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ Logo                     ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ ‚îÇ [ThemePreview]‚îÇ  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚îÇ [current-logo.png] ‚îÇ   ‚îÇ ‚îÇ              ‚îÇ  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚îÇ [üì§ Upload New]    ‚îÇ   ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄHeader‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ ‚îÇ ‚îÇ[Logo]Nav ‚îÇ ‚îÇ  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ                          ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄSidebar‚îÄ‚îÄ‚î§ ‚îÇ  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ Colors                   ‚îÇ ‚îÇ ‚îÇ ‚ñ∏ Item   ‚îÇ ‚îÇ  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ                          ‚îÇ ‚îÇ ‚îÇ ‚ñ∏ Item*  ‚îÇ ‚îÇ  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ Primary                  ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄContent‚îÄ‚î§ ‚îÇ  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ [#1976d2] [‚ñà‚ñà] ‚úÖ 5.3:1 ‚îÇ ‚îÇ ‚îÇ [Card   ]‚îÇ ‚îÇ  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ                          ‚îÇ ‚îÇ ‚îÇ [Button ]‚îÇ ‚îÇ  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ Secondary                ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ [#dc004e] [‚ñà‚ñà] ‚úÖ 5.8:1 ‚îÇ ‚îÇ              ‚îÇ  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ                          ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ Background               ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ [#ffffff] [‚ñà‚ñà]            ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ                          ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ Surface                  ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ [#f5f5f5] [‚ñà‚ñà]            ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ                          ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ Text                     ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ [#212121] [‚ñà‚ñà]            ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ                          ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ Fonts                    ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ                          ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ Heading Font             ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ [Inter          ‚ñæ]       ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ                          ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ Body Font                ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ [Roboto         ‚ñæ]       ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ                          ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ                          ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ [Reset to Default]       ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ        [Cancel] [Save]   ‚îÇ                    ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  |
|           |  ‚îÇ                                                  ‚îÇ  |
|           |  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  |
+==================================================================+
```

**Tablet (768px)**: Live preview moves below form panel (stacked layout). Form is full-width.

**Mobile (375px)**: Live preview hidden (insufficient space). Only form panel shown with "Preview" button that opens preview in a bottom sheet.

#### State Inventory

| State                 | Trigger                                  | Visual Change                                                                        | User Feedback                        |
| --------------------- | ---------------------------------------- | ------------------------------------------------------------------------------------ | ------------------------------------ |
| Default               | Page load                                | Form populated with current theme values; preview shows current look                 | ‚Äî                                    |
| Editing               | User changes any value                   | Preview updates live; "Save" button enables; "Unsaved changes" indicator             | ‚Äî                                    |
| Color invalid         | Invalid hex input                        | Red border on input; inline error: "Invalid hex color value. Use format: #RRGGBB"    | aria-invalid="true"                  |
| Contrast warning      | Valid color but low contrast             | Orange warning: "Contrast ratio 1.2:1 ‚Äî does not meet WCAG AA (minimum 4.5:1)"       | aria-live="polite" announces warning |
| Contrast pass         | Valid color with good contrast           | Green check: "‚úÖ 5.3:1 ‚Äî Passes WCAG AA"                                             | ‚Äî                                    |
| Logo uploading        | File selected                            | Progress bar on logo area                                                            | "Uploading logo..."                  |
| Logo uploaded         | Upload complete                          | New logo preview in both form and ThemePreview                                       | Toast: "Logo uploaded"               |
| Saving                | "Save" clicked                           | Button shows spinner; form disabled                                                  | aria-busy="true"                     |
| Save success          | API returns 200                          | Toast: "Theme updated successfully. Users will see changes on their next page load." | Toast auto-announces                 |
| Save error            | API returns error                        | Toast error: "Unable to save theme changes. Please try again." Form data preserved   | Toast auto-announces                 |
| Dirty form navigation | User navigates away with unsaved changes | Browser confirms: "You have unsaved changes. Are you sure you want to leave?"        | ‚Äî                                    |

#### Interactive Elements

| Element               | Type               | Action                  | Outcome                                                                          | FR Ref         |
| --------------------- | ------------------ | ----------------------- | -------------------------------------------------------------------------------- | -------------- |
| Logo upload area      | File input         | Click/drag              | Opens file picker for PNG/SVG/JPG (max 2MB)                                      | FR-009         |
| ColorPicker (√ó5)      | Input + swatch     | Type hex / click swatch | Updates preview live; validates hex; shows contrast ratio                        | FR-009, FR-015 |
| Heading font selector | Select             | Change                  | Updates preview heading font                                                     | FR-009         |
| Body font selector    | Select             | Change                  | Updates preview body font                                                        | FR-009         |
| Reset to Default      | Button (ghost)     | Click                   | Confirmation dialog: "Reset all branding to Plexica defaults?" ‚Üí Reset or Cancel | FR-010         |
| Cancel                | Button (secondary) | Click                   | Reverts unsaved changes; navigates back                                          | ‚Äî              |
| Save                  | Button (primary)   | Click                   | PUT /api/v1/tenant/settings with theme payload                                   | FR-010         |
| ThemePreview          | Component          | (passive)               | Live preview of shell layout with current form values                            | FR-009         |

#### Accessibility

```
Role: form

Heading hierarchy:
  h1: "Branding Settings"
  h2: "Logo", "Colors", "Fonts" (section headings within form)

Tab order:
  [1] Logo upload area
  [2] Primary color input ‚Üí [3] Primary color picker swatch
  [4] Secondary color input ‚Üí [5] Secondary color picker swatch
  [6] Background color input ‚Üí [7] Background color picker swatch
  [8] Surface color input ‚Üí [9] Surface color picker swatch
  [10] Text color input ‚Üí [11] Text color picker swatch
  [12] Heading font selector
  [13] Body font selector
  [14] Reset to Default button
  [15] Cancel button
  [16] Save button

ARIA:
  Form: aria-label="Branding settings form"
  Each color input: aria-label="[Color name] color", aria-describedby="[color]-contrast"
  Contrast indicator: id="[color]-contrast", role="status", aria-live="polite"
  Logo upload: aria-label="Upload organization logo"
  ThemePreview: aria-hidden="true" (decorative ‚Äî live preview is visual only)
  Save button: aria-disabled="true" when no changes; text changes to "Saving..." with aria-busy

Contrast:
  Form labels (#0A0A0A on #FFFFFF): 17.4:1 ‚úì
  Contrast warning text (#D97706 on #FFFFFF): 4.5:1 ‚úì
  Green check text (#16A34A on #FFFFFF): 4.5:1 ‚úì

Keyboard:
  Enter on Save: submits form
  Esc on color picker popup: closes picker
  Tab through all form fields in logical order

Screen reader flow:
  1. "Branding Settings, heading level 1"
  2. "Branding settings form"
  3. "Upload organization logo, file input"
  4. "Primary color, text input, #1976d2"
  5. "Contrast ratio 5.3:1, passes WCAG AA" (aria-live announcement on change)
  6. "Save, button" or "Save, button, disabled" (when no changes)
```

---

### Screen 6: Session Expired Modal

**Source**: FR-013, FR-014 | **Type**: New

```
+==================================================================+
|  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë (dimmed background - entire shell) ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ                                      ‚îÇ  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ          üîí                           ‚îÇ  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ                                      ‚îÇ  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ   Session Expired                    ‚îÇ  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ                                      ‚îÇ  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ   Your session has expired.           ‚îÇ  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ   Please sign in again to continue.   ‚îÇ  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ   You will be returned to this page   ‚îÇ  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ   after signing in.                   ‚îÇ  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ                                      ‚îÇ  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ   [ üîë Sign In ]                     ‚îÇ  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îÇ                                      ‚îÇ  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
|  ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  |
+==================================================================+
```

#### State Inventory

| State      | Trigger                                                 | Visual Change                                                                          | User Feedback                              |
| ---------- | ------------------------------------------------------- | -------------------------------------------------------------------------------------- | ------------------------------------------ |
| Visible    | 401 response intercepted and refresh token also expired | Non-dismissable modal overlay. Background dimmed. Only "Sign In" button is interactive | Screen reader announces: "Session Expired" |
| Signing in | "Sign In" clicked                                       | Button shows spinner: "Redirecting..."                                                 | "Redirecting to sign in page"              |
| Redirect   | OAuth login URL constructed                             | Browser navigates to Keycloak login page with redirect_uri=current_path                | ‚Äî                                          |

#### Interactive Elements

| Element        | Type             | Action | Outcome                                                          | FR Ref |
| -------------- | ---------------- | ------ | ---------------------------------------------------------------- | ------ |
| Sign In button | Button (primary) | Click  | Initiates OAuth flow with `redirect_uri` set to current URL path | FR-014 |

#### Accessibility

```
Role: dialog (non-dismissable)

ARIA:
  Modal container: role="dialog", aria-modal="true", aria-labelledby="session-expired-title"
  Heading: id="session-expired-title", h1 "Session Expired"
  Body text: aria-describedby="session-expired-desc"
  Sign In button: autofocus on modal open

Focus trap: Yes ‚Äî only the Sign In button is focusable. No close button. No Esc dismiss.

Tab order:
  [1] Sign In button (only focusable element)

Contrast:
  Modal text (#0A0A0A on #FFFFFF): 17.4:1 ‚úì
  Overlay dimming: 60% opacity black

Keyboard:
  Tab: Stays on Sign In button (focus trap)
  Enter/Space: Activates Sign In

Screen reader flow:
  1. "Session Expired, dialog"
  2. "Your session has expired. Please sign in again to continue. You will be returned to this page after signing in."
  3. "Sign In, button"
```

---

### Screen 7: Auth Warning Banner

**Source**: FR-013 | **Type**: New

```
+==================================================================+  W: 1440px
|  [TenantLogo]  Plexica          [üîî] [üåê EN ‚ñæ] [üë§ Dana ‚ñæ]     |
+==================================================================+
| ‚ö†Ô∏è Unable to refresh your session. Your current session will     [‚úï]|
|    remain active until it expires.                                  |
+==================================================================+
|          |                                                        |
| SIDEBAR  |  MAIN CONTENT AREA                                    |
|          |  (normal content ‚Äî user can continue working)          |
|          |                                                        |
+==================================================================+
```

#### State Inventory

| State     | Trigger                                    | Visual Change                                                                      | User Feedback                        |
| --------- | ------------------------------------------ | ---------------------------------------------------------------------------------- | ------------------------------------ |
| Visible   | Token refresh fails (Keycloak unreachable) | Yellow warning banner below header. Persistent until dismissed or session resolves | aria-live="polite" announces message |
| Dismissed | User clicks ‚úï                              | Banner disappears; condition still exists                                          | ‚Äî                                    |
| Resolved  | Subsequent refresh succeeds                | Banner automatically removed                                                       | ‚Äî                                    |
| Escalated | Token actually expires                     | SessionExpiredModal appears (Screen 6)                                             | ‚Äî                                    |

#### Interactive Elements

| Element     | Type          | Action | Outcome                  | FR Ref |
| ----------- | ------------- | ------ | ------------------------ | ------ |
| Dismiss (‚úï) | Button (icon) | Click  | Hides the warning banner | FR-013 |

#### Accessibility

```
ARIA:
  Banner: role="alert", aria-live="polite"
  Dismiss button: aria-label="Dismiss session warning"

Contrast:
  Warning icon (#D97706) on warning bg (#FFFBEB): 4.5:1 ‚úì
  Warning text (#0A0A0A) on warning bg (#FFFBEB): 16.2:1 ‚úì

Screen reader flow:
  1. "Warning: Unable to refresh your session. Your current session will remain active until it expires."
  2. "Dismiss session warning, button"
```

---

### Screen 8: Widget Embed (In-Page)

**Source**: FR-011 | **Type**: New

```
+==================================================================+  W: 1440px
|  [TenantLogo]  Plexica          [üîî] [üåê EN ‚ñæ] [üë§ Dana ‚ñæ]     |
+==================================================================+
|          |                                                        |
| SIDEBAR  |  MAIN CONTENT AREA (Project Management Plugin Page)    |
|          |                                                        |
| üè† Dash  |  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  |
| üë§ Prof  |  ‚îÇ [Breadcrumb: Home > Projects > Acme Redesign]    ‚îÇ  |
| ‚öôÔ∏è Set   |  ‚îÇ                                                  ‚îÇ  |
| ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  |  ‚îÇ Acme Redesign                                    ‚îÇ  |
| PLUGINS   |  ‚îÇ Status: In Progress                              ‚îÇ  |
| ‚ñ∏ üìäCRM  |  ‚îÇ                                                  ‚îÇ  |
| ‚ñ∏ üí∞Bill |  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Related Contacts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  |
| ‚ñ∏ [üìã    |  ‚îÇ ‚îÇ                                               ‚îÇ ‚îÇ  |
|   Proj]* |  ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚îÇ [ContactCard]‚îÇ  ‚îÇ [ContactCard]‚îÇ           ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚îÇ üë§ John Smith‚îÇ  ‚îÇ üë§ Jane Doe  ‚îÇ           ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚îÇ john@acme   ‚îÇ  ‚îÇ jane@acme    ‚îÇ           ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚îÇ üìû 555-1234 ‚îÇ  ‚îÇ üìû 555-5678  ‚îÇ           ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚îÇ [View in CRM]‚îÇ  ‚îÇ [View in CRM]‚îÇ           ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îÇ                                               ‚îÇ ‚îÇ  |
|           |  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  |
|           |  ‚îÇ                                                  ‚îÇ  |
|           |  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Project Details ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ  |
|           |  ‚îÇ ‚îÇ [Normal plugin content continues below]    ‚îÇ   ‚îÇ  |
|           |  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ  |
|           |  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  |
+==================================================================+
```

#### State Inventory

| State            | Trigger                     | Visual Change                                            | User Feedback               |
| ---------------- | --------------------------- | -------------------------------------------------------- | --------------------------- |
| Loading          | Widget remote being fetched | Skeleton card placeholders in "Related Contacts" section | aria-busy="true" on section |
| Loaded           | Widget mounted successfully | ContactCard widgets render with data, themed per tenant  | aria-busy="false"           |
| Error (fallback) | Widget remote unavailable   | Fallback placeholder (see Screen 9)                      | ‚Äî                           |

#### Interactive Elements

| Element             | Type                      | Action              | Outcome                          | FR Ref |
| ------------------- | ------------------------- | ------------------- | -------------------------------- | ------ |
| ContactCard         | Widget (remote component) | Click "View in CRM" | Navigate to `/crm/contacts/{id}` | FR-011 |
| ContactCard (hover) | Widget                    | Hover               | Elevated shadow (shadow-md)      | FR-011 |

#### Accessibility

```
ARIA:
  "Related Contacts" section: role="region", aria-label="Related contacts from CRM"
  Each ContactCard: role="article", aria-label="Contact: [Name]"
  "View in CRM" link: aria-label="View John Smith in CRM"

Keyboard:
  Tab to each ContactCard ‚Üí Tab to "View in CRM" link within
  Enter/Space on link: navigates to CRM contact page

Screen reader flow:
  1. "Related contacts from CRM, region"
  2. "Contact: John Smith, article"
  3. "John Smith, john@acme, 555-1234"
  4. "View John Smith in CRM, link"
```

---

### Screen 9: Widget Fallback

**Source**: FR-011 | **Type**: New

```
Within the "Related Contacts" section of a plugin page:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Related Contacts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ                                              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚ìò Contact information unavailable.         ‚îÇ ‚îÇ
‚îÇ  ‚îÇ    Refresh the page to try again.            ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                              ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### State Inventory

| State    | Trigger                      | Visual Change                                                     | User Feedback                            |
| -------- | ---------------------------- | ----------------------------------------------------------------- | ---------------------------------------- |
| Fallback | Widget remote failed to load | Gray card with info icon, message text, and suggestion to refresh | Screen reader announces fallback message |

#### Interactive Elements

None ‚Äî the fallback is static. Page refresh retries widget load.

#### Accessibility

```
ARIA:
  Fallback container: role="status", aria-live="polite"
  Fallback text: "Contact information unavailable. Refresh the page to try again."

Contrast:
  Info icon (#2563EB) on muted bg (#F4F4F5): 4.8:1 ‚úì
  Fallback text (#71717A) on muted bg (#F4F4F5): 3.1:1 ‚Äî use #52525B for 4.5:1 ‚úì

Screen reader flow:
  1. "Contact information unavailable. Refresh the page to try again."
```

---

### Screen 10: Permission Denied (403)

**Source**: FR-008, FR-009 | **Type**: New

> **Note**: Adapts the PluginNotFoundPage pattern with a lock icon and permission-specific messaging.

```
+==================================================================+  W: 1440px
|  [TenantLogo]  Plexica          [üîî] [üåê EN ‚ñæ] [üë§ Dana ‚ñæ]     |
+==================================================================+
|          |                                                        |
| SIDEBAR  |  MAIN CONTENT AREA                                    |
|          |                                                        |
|          |        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            |
|          |        ‚îÇ                                  ‚îÇ            |
|          |        ‚îÇ            üîí                    ‚îÇ            |
|          |        ‚îÇ                                  ‚îÇ            |
|          |        ‚îÇ       Access Denied              ‚îÇ            |
|          |        ‚îÇ                                  ‚îÇ            |
|          |        ‚îÇ  You don't have permission to    ‚îÇ            |
|          |        ‚îÇ  access this page. Contact your  ‚îÇ            |
|          |        ‚îÇ  tenant administrator if you     ‚îÇ            |
|          |        ‚îÇ  need access.                    ‚îÇ            |
|          |        ‚îÇ                                  ‚îÇ            |
|          |        ‚îÇ   [ Go to Dashboard ]            ‚îÇ            |
|          |        ‚îÇ                                  ‚îÇ            |
|          |        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            |
|          |                                                        |
+==================================================================+
```

#### State Inventory

| State   | Trigger                            | Visual Change       | User Feedback                           |
| ------- | ---------------------------------- | ------------------- | --------------------------------------- |
| Default | User navigates to restricted route | Centered error card | Screen reader announces "Access Denied" |

#### Interactive Elements

| Element         | Type   | Action | Outcome                     | FR Ref |
| --------------- | ------ | ------ | --------------------------- | ------ |
| Go to Dashboard | Button | Click  | Navigate to `/` (dashboard) | FR-008 |

#### Accessibility

```
ARIA:
  Page wrapper: role="main", aria-label="Permission denied"
  Heading: h1 "Access Denied"
  Focus management: "Go to Dashboard" button receives focus on mount

Contrast:
  Lock icon and heading (#0A0A0A) on surface (#FFFFFF): 17.4:1 ‚úì
  Body text (#71717A) on surface (#FFFFFF): 4.7:1 ‚úì

Screen reader flow:
  1. "Permission denied" (main landmark label)
  2. "Access Denied" (h1)
  3. "You don't have permission to access this page. Contact your tenant administrator if you need access."
  4. "Go to Dashboard, button" (focused on mount)
```

---

## 4. Component Inventory

### Component: SidebarNav

| Property    | Value                      |
| ----------- | -------------------------- |
| Type        | Navigation                 |
| Used on     | All screens (App Shell)    |
| FR coverage | FR-006, FR-007, FR-008     |
| Existing?   | No (new ‚Äî shell component) |

**Variants**: expanded (desktop), overlay (mobile/tablet)

**Structure**:

- Core nav section: Dashboard, Profile, Settings (pinned at top)
- Separator
- Plugins group: collapsible, dynamically populated from enabled plugins
- Each plugin item: icon + label

**States**:

| State             | Visual                                            | Aria                  |
| ----------------- | ------------------------------------------------- | --------------------- |
| Default           | Items listed vertically, muted foreground         | ‚Äî                     |
| Active item       | Background: --primary, text: --primary-foreground | aria-current="page"   |
| Hover             | Background: --muted                               | ‚Äî                     |
| Plugins collapsed | Only group header visible; chevron points right   | aria-expanded="false" |
| Plugins expanded  | All plugin items visible; chevron points down     | aria-expanded="true"  |
| Overlay (mobile)  | Slides in from left, backdrop dimmed              | aria-modal="true"     |

**Keyboard behavior**:

- `Tab`: Focuses next nav item
- `Enter` / `Space`: Activates link or toggles group
- `Esc`: Closes overlay (mobile)

---

### Component: PluginLoadingBoundary

> **Implementation Mapping**: This design component is realized by Spec 010 as two separate implementation components:
>
> - **Page level** (`level: "page"`): ‚Üí `PluginErrorBoundary` + `PluginErrorFallback` (Spec 010, Phase 1, T010-1.1‚Äì1.3)
> - **Widget level** (`level: "widget"`): ‚Üí `WidgetLoader` + `WidgetFallback` (Spec 010, Phase 3, T010-3.x)
>
> The `level` prop in this design spec is realized as **separate components** in implementation, not a single component with a prop. Implementers should consult Spec 010 for the actual API surface.

| Property    | Value                             |
| ----------- | --------------------------------- |
| Type        | Container / Error boundary        |
| Used on     | Plugin Page Loading, Widget Embed |
| FR coverage | FR-004, FR-005, FR-011            |
| Existing?   | No (new)                          |

**Variants**: page-level (full content area), widget-level (inline within page)

**States**:

| State          | Visual                                                            | Aria                                                      |
| -------------- | ----------------------------------------------------------------- | --------------------------------------------------------- |
| Loading        | Skeleton placeholder (page) or skeleton card (widget)             | aria-busy="true"                                          |
| Loaded         | Plugin content renders                                            | aria-busy="false"                                         |
| Error (page)   | Error card with AlertTriangle, message, retry + dashboard buttons | role="alert"                                              |
| Error (widget) | Inline fallback card with info icon and message                   | role="status"                                             |
| Retrying       | Skeleton returns                                                  | aria-busy="true", aria-live="polite" announces "Retrying" |

**Props**:

- `pluginId`: string ‚Äî identifies which plugin
- `fallback`: ReactNode ‚Äî custom loading state (default: Skeleton)
- `errorFallback`: ReactNode ‚Äî custom error state (default: built-in error card)
- `level`: "page" | "widget" ‚Äî determines error boundary behavior
- `onRetry`: () => void ‚Äî retry handler

---

### Component: ThemePreview

| Property    | Value                                                                        |
| ----------- | ---------------------------------------------------------------------------- |
| Type        | Display / Preview                                                            |
| Used on     | Tenant Theme Settings                                                        |
| FR coverage | FR-009, FR-010                                                               |
| Existing?   | Listed in design-system.md ¬ß New Components Needed (Spec 001), not yet built |

**Variants**: default (desktop card), sheet (mobile bottom sheet)

**States**:

| State    | Visual                                         | Aria                            |
| -------- | ---------------------------------------------- | ------------------------------- |
| Default  | Mini shell mockup with current theme values    | aria-hidden="true" (decorative) |
| Updating | Theme values change live as form inputs change | ‚Äî                               |

**Props**:

- `logo`: string (URL)
- `colors`: { primary, secondary, background, surface, text }
- `fonts`: { heading, body }

**Keyboard behavior**: None ‚Äî decorative component, not interactive.

---

### Component: ColorPickerField

| Property    | Value                                                                               |
| ----------- | ----------------------------------------------------------------------------------- |
| Type        | Form input                                                                          |
| Used on     | Tenant Theme Settings                                                               |
| FR coverage | FR-009, FR-015                                                                      |
| Existing?   | ColorPicker exists in design-system.md (Spec 001); needs contrast checker extension |

**Structure**: Label + hex text input + color swatch button (opens native picker) + contrast ratio indicator

**States**:

| State                 | Visual                                                          | Aria                                                 |
| --------------------- | --------------------------------------------------------------- | ---------------------------------------------------- |
| Default               | Hex value displayed, swatch shows color                         | aria-label="[Color name] color"                      |
| Focused               | Focus ring on input                                             | ‚Äî                                                    |
| Valid (good contrast) | Green check + ratio text: "‚úÖ 5.3:1 ‚Äî Passes WCAG AA"           | aria-describedby="[id]-contrast"                     |
| Valid (poor contrast) | Orange warning + ratio text: "‚ö†Ô∏è 1.2:1 ‚Äî Does not meet WCAG AA" | aria-describedby="[id]-contrast", aria-live="polite" |
| Invalid               | Red border + "Invalid hex color value"                          | aria-invalid="true"                                  |

**Props**:

- `label`: string
- `value`: string (hex)
- `contrastAgainst`: string (hex) ‚Äî reference color for contrast calculation
- `onChange`: (value: string) => void
- `id`: string ‚Äî for aria associations

**Keyboard behavior**:

- `Tab`: Focus input, then swatch
- Type: Updates hex value live
- `Enter` on swatch: Opens color picker

---

### Component: SessionExpiredModal

| Property    | Value                                                |
| ----------- | ---------------------------------------------------- |
| Type        | Modal (non-dismissable)                              |
| Used on     | Any authenticated page                               |
| FR coverage | FR-014                                               |
| Existing?   | Listed in design-system.md (Spec 002), not yet built |

**States**:

| State      | Visual                                                                              | Aria                             |
| ---------- | ----------------------------------------------------------------------------------- | -------------------------------- |
| Visible    | Centered modal with Lock icon, heading, body text, Sign In button. Dimmed backdrop. | role="dialog", aria-modal="true" |
| Signing in | Button text: "Redirecting...", spinner                                              | aria-busy="true"                 |

**Props**:

- `redirectUri`: string ‚Äî current page URL for post-login redirect
- `onSignIn`: () => void ‚Äî initiates OAuth flow

**Keyboard behavior**:

- `Tab`: Focus trapped on Sign In button only
- `Enter` / `Space`: Activates Sign In
- `Esc`: No effect (non-dismissable)

---

### Component: AuthWarningBanner

| Property    | Value                                      |
| ----------- | ------------------------------------------ |
| Type        | Banner / Alert                             |
| Used on     | Below header, any page                     |
| FR coverage | FR-013                                     |
| Existing?   | No (new ‚Äî extends Alert component pattern) |

**States**:

| State     | Visual                                                              | Aria                             |
| --------- | ------------------------------------------------------------------- | -------------------------------- |
| Visible   | Yellow banner below header: warning icon + message + dismiss button | role="alert", aria-live="polite" |
| Dismissed | Banner removed from DOM                                             | ‚Äî                                |
| Resolved  | Banner auto-removed when refresh succeeds                           | ‚Äî                                |

**Props**:

- `message`: string
- `onDismiss`: () => void

**Keyboard behavior**:

- `Tab`: Focuses dismiss button
- `Enter` / `Space` on dismiss: Removes banner

---

### Component: PluginNotFoundPage

| Property    | Value                                 |
| ----------- | ------------------------------------- |
| Type        | Page (full content area)              |
| Used on     | Disabled plugin routes                |
| FR coverage | FR-008                                |
| Existing?   | No (new ‚Äî extends EmptyState pattern) |

**States**:

| State   | Visual                                                                                         | Aria       |
| ------- | ---------------------------------------------------------------------------------------------- | ---------- |
| Default | Centered: search icon + "Page Not Found" heading + explanation text + "Go to Dashboard" button | h1 heading |

**Props**:

- `message`: string (optional ‚Äî default: "This feature is not available for your organization.")

---

### Component: WidgetContainer

| Property    | Value                                       |
| ----------- | ------------------------------------------- |
| Type        | Container                                   |
| Used on     | Plugin pages embedding cross-plugin widgets |
| FR coverage | FR-011                                      |
| Existing?   | No (new)                                    |

**Structure**: Section wrapper with heading ("Related [X]") that uses PluginLoadingBoundary internally.

**States**:

| State   | Visual                        | Aria                            |
| ------- | ----------------------------- | ------------------------------- |
| Loading | Skeleton cards within section | role="region", aria-busy="true" |
| Loaded  | Rendered widgets from remote  | aria-busy="false"               |
| Error   | Widget fallback placeholder   | role="status"                   |

**Props**:

- `pluginId`: string ‚Äî source plugin for widget
- `widgetName`: string ‚Äî exposed component name
- `widgetProps`: Record<string, unknown> ‚Äî props to pass through
- `fallback`: ReactNode ‚Äî loading fallback
- `errorFallback`: ReactNode ‚Äî error fallback

---

## 5. Design Tokens

> Reference: `.forge/ux/design-system.md` v1.1
>
> This feature primarily reuses existing tokens. New tokens listed below.

### Tokens Used

| Token                  | Value                                 | Usage in this feature                           |
| ---------------------- | ------------------------------------- | ----------------------------------------------- |
| `--primary`            | `#0066CC` / `#3B82F6`                 | Active sidebar item, primary CTA buttons, links |
| `--primary-foreground` | `#FFFFFF`                             | Text on primary backgrounds                     |
| `--background`         | `#FFFFFF` / `#0A0A0A`                 | Page background, modal background               |
| `--foreground`         | `#0A0A0A` / `#FAFAFA`                 | Body text, headings                             |
| `--muted`              | `#F4F4F5` / `#27272A`                 | Sidebar hover, skeleton bg, widget fallback bg  |
| `--muted-foreground`   | `#71717A` / `#A1A1AA`                 | Secondary text, breadcrumb inactive items       |
| `--card`               | `#FFFFFF` / `#111111`                 | Error boundary card, theme settings cards       |
| `--border`             | `#E4E4E7` / `#27272A`                 | Sidebar separator, form field borders           |
| `--ring`               | `#0066CC` / `#3B82F6`                 | Focus ring on all interactive elements          |
| `--destructive`        | `#DC2626` / `#EF4444`                 | Invalid hex input border                        |
| `--status-warning`     | `#D97706` / `#F59E0B`                 | Auth warning banner, contrast warnings          |
| `--status-success`     | `#16A34A` / `#22C55E`                 | Contrast pass indicator                         |
| `--status-info`        | `#2563EB` / `#60A5FA`                 | Widget fallback info icon                       |
| `--shadow-sm`          | `0 1px 2px rgba(0,0,0,0.05)`          | Sidebar (desktop)                               |
| `--shadow-md`          | `0 4px 6px -1px rgba(0,0,0,0.07)...`  | Cards, widget hover                             |
| `--shadow-lg`          | `0 10px 15px -3px rgba(0,0,0,0.1)...` | Session expired modal                           |
| `--radius-md`          | `6px`                                 | Buttons, cards                                  |
| `--radius-lg`          | `8px`                                 | Modals, panels                                  |
| `--space-4`            | `16px`                                | Card padding, form field spacing                |
| `--space-6`            | `24px`                                | Section spacing                                 |
| `--space-8`            | `32px`                                | Between major sections                          |
| `--transition-fast`    | `150ms ease-in-out`                   | Sidebar item hover                              |
| `--transition-normal`  | `200ms ease-in-out`                   | Sidebar collapse/expand                         |
| `--transition-slow`    | `300ms ease-in-out`                   | Sidebar overlay slide                           |
| `--font-size-xs`       | `12px`                                | Breadcrumb text, contrast ratio text            |
| `--font-size-sm`       | `14px`                                | Sidebar labels, secondary labels                |
| `--font-size-base`     | `16px`                                | Body text, form inputs                          |
| `--font-size-lg`       | `18px`                                | Card titles                                     |
| `--font-size-2xl`      | `24px`                                | Page titles (h1)                                |

### New Tokens Introduced

| Token                     | Value (Light)     | Value (Dark)      | Usage                                                 |
| ------------------------- | ----------------- | ----------------- | ----------------------------------------------------- |
| `--sidebar-width`         | `260px`           | `260px`           | Sidebar width on desktop                              |
| `--sidebar-width-mobile`  | `280px`           | `280px`           | Sidebar overlay width on mobile                       |
| `--overlay-backdrop`      | `rgba(0,0,0,0.5)` | `rgba(0,0,0,0.7)` | Dimmed backdrop for sidebar overlay and session modal |
| `--header-height`         | `56px`            | `56px`            | Header bar height                                     |
| `--banner-warning-bg`     | `#FFFBEB`         | `#1C1917`         | Auth warning banner background                        |
| `--banner-warning-border` | `#FDE68A`         | `#92400E`         | Auth warning banner border                            |
| `--skeleton-from`         | `#E5E7EB`         | `#1F2937`         | Skeleton animation start color                        |
| `--skeleton-to`           | `#F3F4F6`         | `#374151`         | Skeleton animation end color                          |

---

## 6. Accessibility Summary

| Screen                | WCAG 2.1 AA  | Notes                                                                                                   |
| --------------------- | ------------ | ------------------------------------------------------------------------------------------------------- |
| App Shell Layout      | ‚úÖ Compliant | Skip link, landmark regions, keyboard nav, focus trap on mobile overlay, contrast verified              |
| Plugin Loading        | ‚úÖ Compliant | aria-busy, aria-live announcements for load start/complete, focus management                            |
| Plugin Error Boundary | ‚úÖ Compliant | role="alert", keyboard-operable retry, descriptive error text                                           |
| Disabled Plugin (404) | ‚úÖ Compliant | h1 heading, CTA keyboard accessible                                                                     |
| Tenant Theme Settings | ‚úÖ Compliant | Form labels, contrast indicators with aria-live, keyboard tab order through all fields                  |
| Session Expired Modal | ‚úÖ Compliant | Focus trap, aria-modal, aria-labelledby, non-dismissable by design                                      |
| Auth Warning Banner   | ‚úÖ Compliant | role="alert", dismissible, contrast verified against warning background                                 |
| Widget Embed          | ‚úÖ Compliant | region landmark, article roles for widgets, labeled links                                               |
| Widget Fallback       | ‚ö†Ô∏è Note      | Fallback text contrast adjusted: use `#52525B` instead of `#71717A` on muted background for 4.5:1 ratio |

**Open accessibility items**:

- [ ] Widget fallback text: update `--muted-foreground` usage on `--muted` background to use `#52525B` (or add `--muted-foreground-strong` token) for 4.5:1 contrast compliance ‚Äî affects widget fallback card only

---

## 7. Open Questions

| #   | Question                                                                                                                                 | Impact                                          | Owner        | Status                                                                                                                                 |
| --- | ---------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------- | ------------ | -------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | Should the sidebar support a "Recently Used" pinned section for frequently accessed plugins? (Recommended for tenants with 10+ plugins.) | Medium ‚Äî UX enhancement, not blocking           | PM/Design    | Open                                                                                                                                   |
| 2   | Should the Theme Settings page validate logo dimensions (e.g., min 64√ó64, max 512√ó512) or accept any size with auto-scaling?             | Low ‚Äî implementation detail                     | Dev          | Open                                                                                                                                   |
| 3   | Font selector options: should available fonts be limited to a curated list (Google Fonts subset) or allow any web font URL?              | Medium ‚Äî affects security (CSP) and performance | Dev/Security | ‚úÖ Resolved ‚Äî ADR-020: self-host curated ~25 WOFF2 fonts via MinIO/CDN; Google Fonts CDN rejected (GDPR); arbitrary URL input deferred |

---

## 8. Cross-References

| Artifact                                 | Path                                                     |
| ---------------------------------------- | -------------------------------------------------------- |
| Feature spec                             | `.forge/specs/005-frontend-architecture/spec.md`         |
| User journeys                            | `.forge/specs/005-frontend-architecture/user-journey.md` |
| Architecture                             | `.forge/architecture/architecture.md`                    |
| Design system                            | `.forge/ux/design-system.md`                             |
| Spec 010 (Frontend Production Readiness) | `.forge/specs/010-frontend-production-readiness/spec.md` |
| ADR-004: Module Federation               | `.forge/knowledge/adr/adr-004-module-federation.md`      |
| ADR-009: TailwindCSS Tokens              | `.forge/knowledge/adr/adr-009-tailwindcss-v4-tokens.md`  |
| ADR-011: Vite Federation                 | `.forge/knowledge/adr/adr-011-vite-module-federation.md` |
| ADR-020: Font Hosting Strategy           | `.forge/knowledge/adr/adr-020-font-hosting-strategy.md`  |
