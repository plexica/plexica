# User Journeys: Authentication System

> **Spec reference**: `.forge/specs/002-authentication/spec.md`
> **Design spec**: `.forge/specs/002-authentication/design-spec.md`
> **Generated by**: `/forge-ux`
> **Date**: 2026-02-22

---

## 1. Personas

### Persona 1: Maya

| Field               | Detail                                                                                                                                                                                                                |
| ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Name                | Maya                                                                                                                                                                                                                  |
| Role                | Tenant User (team member)                                                                                                                                                                                             |
| Age range           | 25-40                                                                                                                                                                                                                 |
| Goal                | Log in to her tenant's workspace quickly and reliably so she can start working                                                                                                                                        |
| Pain points         | 1. Confusion when redirected to external login pages â€” "Is this legitimate?" 2. Cryptic error messages when something goes wrong (expired session, wrong tenant) 3. Being forced to re-login mid-task without warning |
| Tech literacy       | Medium                                                                                                                                                                                                                |
| Device preference   | Both (laptop at desk, phone on the go)                                                                                                                                                                                |
| Accessibility needs | None                                                                                                                                                                                                                  |
| Quote               | _"I just want to click one button and be in. I don't care how the auth works â€” just don't make me think about it."_                                                                                                   |

---

### Persona 2: Raj

| Field               | Detail                                                                                                                                                                                                                            |
| ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Name                | Raj                                                                                                                                                                                                                               |
| Role                | Tenant Admin                                                                                                                                                                                                                      |
| Age range           | 30-50                                                                                                                                                                                                                             |
| Goal                | Manage his organization's tenant, including understanding auth errors when team members report login problems                                                                                                                     |
| Pain points         | 1. Cannot tell if login issues are on Plexica's side or Keycloak's side 2. No visibility into rate limiting or suspended tenant status from the UI 3. Needs to access admin features quickly after login without extra navigation |
| Tech literacy       | High                                                                                                                                                                                                                              |
| Device preference   | Desktop                                                                                                                                                                                                                           |
| Accessibility needs | None                                                                                                                                                                                                                              |
| Quote               | _"When a team member says 'I can't log in', I need to know exactly what went wrong â€” not 'something happened'."_                                                                                                                  |

---

### Persona 3: Diana

| Field               | Detail                                                                                                                                                                                                           |
| ------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Name                | Diana                                                                                                                                                                                                            |
| Role                | Super Admin (platform operator)                                                                                                                                                                                  |
| Age range           | 28-45                                                                                                                                                                                                            |
| Goal                | Access the Super Admin panel via the master realm to manage tenants and monitor the platform                                                                                                                     |
| Pain points         | 1. Super Admin login should be clearly separated from tenant login to avoid confusion 2. Needs immediate access to tenant management after login 3. Cannot risk being locked out if a specific tenant has issues |
| Tech literacy       | High                                                                                                                                                                                                             |
| Device preference   | Desktop                                                                                                                                                                                                          |
| Accessibility needs | Low vision â€” uses browser zoom at 150%                                                                                                                                                                           |
| Quote               | _"I manage 200 tenants. If one tenant's Keycloak realm is broken, that must never affect my ability to log in."_                                                                                                 |

---

## 2. User Journeys

---

### Journey 1: Maya â€” Tenant User Login (Happy Path)

**Trigger**: Maya opens her browser and navigates to `acme-corp.plexica.io` (or clicks a bookmarked link) to start her workday.

**Preconditions**:

- Tenant `acme-corp` exists and is in ACTIVE status
- Maya has an account in the `acme-corp` Keycloak realm
- Maya is not currently authenticated (no valid session)

#### Happy Path

| Step | User Action                                     | System Response                                                                                                                                       | Emotional State                                                |
| ---- | ----------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------- |
| 1    | Opens `acme-corp.plexica.io/login` in browser   | Pre-login page loads showing tenant branding (logo/name), a "Sign In" button, and "Powered by Plexica" footer                                         | ğŸ˜ Neutral â€” recognizes the page, sees her company logo        |
| 2    | Clicks "Sign In" button                         | Browser redirects to Keycloak login page for realm `acme-corp`. Keycloak page shows tenant branding. A brief loading indicator shows during redirect. | ğŸ˜ Neutral â€” redirect is fast, Keycloak page looks trustworthy |
| 3    | Enters email and password on Keycloak page      | Keycloak validates credentials                                                                                                                        | ğŸ¤” Focused â€” entering credentials                              |
| 4    | Keycloak redirects back to Plexica callback URL | Plexica exchanges auth code for JWT. Brief loading state: "Signing you in..." with spinner. User profile synced.                                      | ğŸ˜Š Relieved â€” sees the loading state, knows it's working       |
| 5    | Automatic redirect to app home (`/`)            | App shell loads with Maya's name and avatar in top-right user menu. Toast: "Welcome back, Maya"                                                       | ğŸ‰ Satisfied â€” she's in, sees her name, ready to work          |

**Outcome**: Maya is authenticated with a valid JWT containing her tenant context, roles, and team memberships. She can access all resources within her tenant.

**Delight opportunities**:

- Step 1: If Maya has visited before, show her name from localStorage (pre-auth greeting: "Welcome back, Maya" before sign-in).
- Step 5: "Welcome back" toast with her display name personalizes the experience.
- Silent token refresh (FR-014) ensures she never gets interrupted mid-task by an expiry.

---

#### Edge Case A: Suspended Tenant (FR-012)

**Trigger**: Maya navigates to `acme-corp.plexica.io/login` but the tenant has been suspended by a Super Admin.

| Step | User Action                        | System Response                                                                                                                                                                                                                                | Emotional State                         |
| ---- | ---------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------- |
| 1    | Opens `acme-corp.plexica.io/login` | Pre-login page attempts to load tenant info                                                                                                                                                                                                    | ğŸ˜ Neutral                              |
| 2    | â€”                                  | Page shows a full-screen error state: Alert with `destructive` variant. Heading: "Account Suspended". Message: "Your organization's account has been suspended. Please contact your administrator for assistance." No Sign In button is shown. | ğŸ˜Ÿ Concerned â€” but the message is clear |

**Recovery path**: Maya contacts her organization's admin (Raj) or support. No retry on this page â€” the Sign In button is intentionally hidden.
**Feedback**: "Your organization's account has been suspended. Please contact your administrator for assistance." (Per FR-012, NFR-006 â€” no details about why or when.)

---

#### Edge Case B: Rate Limiting (FR-013, NFR-008)

**Trigger**: Maya (or an attacker using Maya's IP) has attempted login 10+ times within 1 minute.

| Step | User Action                                                                      | System Response                                                                                                                                                                                 | Emotional State                                                |
| ---- | -------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------- |
| 1    | Opens login page, clicks "Sign In"                                               | Redirect to Keycloak                                                                                                                                                                            | ğŸ˜ Neutral                                                     |
| 2    | Enters wrong credentials repeatedly on Keycloak (or someone else on same IP did) | Keycloak redirects back to Plexica callback with error                                                                                                                                          | ğŸ˜¤ Frustrated                                                  |
| 3    | Clicks "Sign In" again                                                           | Plexica API returns HTTP 429. Page shows Alert: "Too many login attempts. Please wait 1 minute and try again." with a countdown timer. Sign In button is disabled with a spinner/timer overlay. | ğŸ˜¤ Frustrated â€” but understands why and knows how long to wait |
| 4    | Waits 60 seconds                                                                 | Countdown reaches zero. Sign In button re-enables. Alert dismisses.                                                                                                                             | ğŸ˜ Neutral â€” ready to try again                                |
| 5    | Clicks "Sign In", enters correct credentials                                     | Normal login flow resumes                                                                                                                                                                       | ğŸ˜Š Relieved                                                    |

**Recovery path**: Wait for the rate limit window to expire (60 seconds). The countdown timer gives clear feedback.
**Feedback**: "Too many login attempts. Please wait 1 minute and try again."

---

#### Edge Case C: Session Expired (FR-010)

**Trigger**: Maya has been inactive for 24+ hours. Her JWT has expired and silent refresh failed.

| Step | User Action                               | System Response                                                                                                                                                                                                                     | Emotional State                             |
| ---- | ----------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------- |
| 1    | Clicks a link or navigates within the app | API returns 401 `AUTH_TOKEN_EXPIRED`. Auth middleware detects expired token.                                                                                                                                                        | ğŸ˜ Neutral â€” doesn't see this directly      |
| 2    | â€”                                         | App shows a modal overlay: "Your session has expired. Please sign in again to continue." with a "Sign In" button. The modal prevents interaction with the app behind it but does not clear the page content (reduces context loss). | ğŸ˜• Mildly frustrated â€” but understands      |
| 3    | Clicks "Sign In" in the modal             | Redirect to Keycloak login. After successful login, user is returned to the page they were on (not the home page).                                                                                                                  | ğŸ˜Š Relieved â€” she's back where she left off |

**Recovery path**: Sign in again. Deep-link preservation ensures Maya returns to her previous context.
**Feedback**: "Your session has expired. Please sign in again to continue."

---

### Journey 2: Raj â€” Tenant Admin Login with Error Diagnosis

**Trigger**: A team member tells Raj they can't log in. Raj logs in himself to check the system status and investigate.

**Preconditions**:

- Raj has `tenant_admin` role in the `acme-corp` Keycloak realm
- Raj is not currently authenticated

#### Happy Path

| Step | User Action                                                                 | System Response                                                                          | Emotional State                                |
| ---- | --------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- | ---------------------------------------------- |
| 1    | Opens `acme-corp.plexica.io/login`                                          | Pre-login page loads with tenant branding and "Sign In" button                           | ğŸ˜ Neutral                                     |
| 2    | Clicks "Sign In"                                                            | Redirect to Keycloak                                                                     | ğŸ˜ Neutral                                     |
| 3    | Enters credentials on Keycloak                                              | Authentication succeeds                                                                  | ğŸ˜ Neutral                                     |
| 4    | Redirected back to Plexica                                                  | JWT issued with `roles: ["tenant_admin"]`. App loads.                                    | ğŸ˜ Neutral                                     |
| 5    | Clicks avatar in top-nav â†’ sees user profile with "Tenant Admin" role badge | Profile dropdown shows: name, email, role badge, "Manage Tenant" link, "Sign Out" button | ğŸ˜Š Satisfied â€” sees admin controls immediately |

**Outcome**: Raj is authenticated with admin-level JWT. He can access tenant administration features and diagnose team member issues.

---

#### Edge Case A: Cross-Tenant JWT Error (FR-011)

**Trigger**: Raj accidentally has a bookmark to `globex.plexica.io` but his JWT is for `acme-corp`.

| Step | User Action                                                                                    | System Response                                                                                                                                                                           | Emotional State                        |
| ---- | ---------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------- |
| 1    | Opens `globex.plexica.io` with an `acme-corp` JWT in session                                   | Middleware detects realm mismatch                                                                                                                                                         | ğŸ˜ Neutral                             |
| 2    | â€”                                                                                              | App clears the invalid session and redirects to the `globex.plexica.io/login` page. Alert banner: "You were signed in to a different organization. Please sign in to Globex to continue." | ğŸ˜• Confused briefly â€” then understands |
| 3    | Signs in with Globex credentials (if he has them), or navigates back to `acme-corp.plexica.io` | Normal flow resumes for the correct tenant                                                                                                                                                | ğŸ˜ Neutral                             |

**Recovery path**: Session is automatically cleared. User can sign in to the correct tenant or navigate back.
**Feedback**: "You were signed in to a different organization. Please sign in to Globex to continue."

---

#### Edge Case B: Tenant Not Found (AUTH_TENANT_NOT_FOUND)

**Trigger**: Raj types `acme-corpx.plexica.io` (typo in URL).

| Step | User Action                         | System Response                                                                                                                                                         | Emotional State                          |
| ---- | ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------- |
| 1    | Opens `acme-corpx.plexica.io/login` | Plexica attempts to resolve tenant from subdomain                                                                                                                       | ğŸ˜ Neutral                               |
| 2    | â€”                                   | Full-screen error page: Heading: "Organization Not Found". Message: "We couldn't find an organization at this address. Check the URL and try again." No Sign In button. | ğŸ˜• Confused â€” but the message is helpful |

**Recovery path**: User checks the URL for typos and navigates to the correct subdomain.
**Feedback**: "We couldn't find an organization at this address. Check the URL and try again."

---

### Journey 3: Diana â€” Super Admin Login

**Trigger**: Diana needs to access the Super Admin panel to manage tenants, review system health, or investigate a reported issue.

**Preconditions**:

- Diana has an account in the Keycloak `master` realm with `super_admin` role
- Diana navigates to the Super Admin app (separate URL, e.g., `admin.plexica.io`)

#### Happy Path

| Step | User Action                        | System Response                                                                                                                                 | Emotional State                                  |
| ---- | ---------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ |
| 1    | Opens `admin.plexica.io/login`     | Super Admin login page loads. Plexica platform branding (not tenant branding). Shield icon + "Platform Administration" label. "Sign In" button. | ğŸ˜ Neutral â€” clearly different from tenant login |
| 2    | Clicks "Sign In"                   | Redirect to Keycloak master realm login page                                                                                                    | ğŸ˜ Neutral                                       |
| 3    | Enters Super Admin credentials     | Keycloak authenticates against master realm                                                                                                     | ğŸ¤” Focused                                       |
| 4    | Redirected back to Super Admin app | JWT issued with `realm: "master"`, `roles: ["super_admin"]`. Dashboard loads showing tenant overview, system health.                            | ğŸ‰ Satisfied â€” immediate access to admin tools   |

**Outcome**: Diana is authenticated as Super Admin with platform-wide access. She can manage any tenant regardless of individual tenant status.

---

#### Edge Case A: Non-Super-Admin Attempts Access

**Trigger**: A regular tenant user somehow navigates to `admin.plexica.io` and tries to log in.

| Step | User Action                                               | System Response                                                                                                                                                                                                                         | Emotional State                                          |
| ---- | --------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------- |
| 1    | Opens `admin.plexica.io/login`                            | Super Admin login page loads                                                                                                                                                                                                            | ğŸ˜ Neutral                                               |
| 2    | Clicks "Sign In", authenticates via Keycloak master realm | JWT issued but without `super_admin` role                                                                                                                                                                                               | â€”                                                        |
| 3    | â€”                                                         | App checks JWT roles. Missing `super_admin`. Full-screen error: "Access Denied. You do not have platform administrator privileges. Contact your system administrator if you believe this is an error." Sign Out button only (no retry). | ğŸ˜• Confused â€” but understands they're in the wrong place |

**Recovery path**: User clicks "Sign Out" and navigates to their tenant URL instead.
**Feedback**: "You do not have platform administrator privileges. Contact your system administrator if you believe this is an error."

---

#### Edge Case B: Keycloak Unavailable (NFR-005, Edge Case #1)

**Trigger**: Diana clicks "Sign In" but Keycloak is temporarily down.

| Step | User Action                                | System Response                                                                                                                                                                                                                     | Emotional State                                         |
| ---- | ------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------- |
| 1    | Clicks "Sign In" on Super Admin login page | Redirect to Keycloak fails (connection timeout or error page)                                                                                                                                                                       | ğŸ˜¤ Frustrated                                           |
| 2    | â€”                                          | If Keycloak returns an error page, Diana sees Keycloak's error UI. If the redirect itself fails, Plexica shows: Alert: "Unable to connect to the authentication service. Please try again in a few moments." with a "Retry" button. | ğŸ˜¤ Frustrated â€” but at least knows it's a service issue |
| 3    | Clicks "Retry" after a brief wait          | Redirect to Keycloak attempted again                                                                                                                                                                                                | ğŸ˜ Hopeful                                              |

**Recovery path**: Wait and retry. The "Retry" button makes it easy to try again without refreshing.
**Feedback**: "Unable to connect to the authentication service. Please try again in a few moments."

---

## 3. Journey Flow Diagram

```
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚        USER OPENS TENANT URL         â”‚
                          â”‚    (e.g. acme-corp.plexica.io)       â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  Resolve tenant from â”‚
                              â”‚     subdomain/URL    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â–¼             â–¼              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ NOT FOUNDâ”‚ â”‚ SUSPENDED â”‚  â”‚   ACTIVE     â”‚
                    â”‚ (404)    â”‚ â”‚ (403)     â”‚  â”‚              â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚             â”‚               â”‚
                         â–¼             â–¼               â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Error Page â”‚ â”‚ Error Page   â”‚ â”‚ Pre-Login    â”‚
                  â”‚ "Org Not   â”‚ â”‚ "Account     â”‚ â”‚ Landing Page â”‚
                  â”‚  Found"    â”‚ â”‚  Suspended"  â”‚ â”‚ [Sign In]    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                                         â–¼
                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                â”‚ Redirect to    â”‚
                                                â”‚ Keycloak Login â”‚
                                                â”‚ (Auth Code)    â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                          â–¼             â–¼              â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  Success   â”‚ â”‚  Failed  â”‚  â”‚  Rate    â”‚
                                   â”‚  Callback  â”‚ â”‚  Login   â”‚  â”‚  Limited â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                          â”‚            â”‚              â”‚
                                          â–¼            â–¼              â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚ "Signing   â”‚ â”‚ Keycloak     â”‚ â”‚ "Too many    â”‚
                                   â”‚  you in..."â”‚ â”‚ shows error  â”‚ â”‚  attempts"   â”‚
                                   â”‚  spinner   â”‚ â”‚ on its page  â”‚ â”‚ [countdown]  â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  App Home  â”‚
                                   â”‚  (Authed)  â”‚
                                   â”‚  "Welcome  â”‚
                                   â”‚   back!"   â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚    DURING AUTHENTICATED SESSION    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â–¼             â–¼              â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Token near  â”‚ â”‚ Token    â”‚ â”‚ Cross-tenant   â”‚
                   â”‚ expiry      â”‚ â”‚ expired  â”‚ â”‚ mismatch       â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚             â”‚               â”‚
                          â–¼             â–¼               â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Silent      â”‚ â”‚ Session      â”‚ â”‚ Clear sessionâ”‚
                   â”‚ refresh     â”‚ â”‚ expired      â”‚ â”‚ redirect to  â”‚
                   â”‚ (invisible) â”‚ â”‚ modal +      â”‚ â”‚ correct      â”‚
                   â”‚ FR-014      â”‚ â”‚ re-login     â”‚ â”‚ tenant login â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Cross-References

| Artifact           | Path                                             |
| ------------------ | ------------------------------------------------ |
| Feature spec       | `.forge/specs/002-authentication/spec.md`        |
| Design spec        | `.forge/specs/002-authentication/design-spec.md` |
| Constitution       | `.forge/constitution.md`                         |
| Design system      | `.forge/ux/design-system.md`                     |
| Multi-Tenancy spec | `.forge/specs/001-multi-tenancy/spec.md`         |
| Authorization spec | `.forge/specs/003-authorization/spec.md`         |
