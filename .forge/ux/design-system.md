# Plexica Design System

> **Generated by**: `/forge-ux`
> **Date**: 2026-02-22
> **Status**: Active
> **Version**: 1.0

This document defines the global design tokens and component guidelines for
the Plexica platform. All UI artifacts must reference these tokens.

---

## 1. Foundation

### Platform Context

Plexica uses **Tailwind CSS** with semantic CSS custom properties. The
project has a `@plexica/ui` component library with 30+ components. This
design system documents the token layer that underpins those components.

### Design Principles

1. **Consistency**: Reuse existing `@plexica/ui` components before creating new ones.
2. **Accessibility**: WCAG 2.1 AA compliance minimum. All tokens must support light and dark mode.
3. **Density**: Admin interfaces favor information-dense layouts. Use compact spacing.
4. **Clarity**: Status indicators, error states, and destructive actions must be unambiguous.

---

## 2. Colors

### Semantic Color Tokens

These tokens are the source of truth. They map to Tailwind's `--foreground`,
`--background`, etc. convention already in use in the codebase.

| Token                      | Light Mode | Dark Mode | Usage                                       |
| -------------------------- | ---------- | --------- | ------------------------------------------- |
| `--background`             | `#FFFFFF`  | `#0A0A0A` | Page background                             |
| `--foreground`             | `#0A0A0A`  | `#FAFAFA` | Primary text                                |
| `--card`                   | `#FFFFFF`  | `#111111` | Card backgrounds                            |
| `--card-foreground`        | `#0A0A0A`  | `#FAFAFA` | Card text                                   |
| `--muted`                  | `#F4F4F5`  | `#27272A` | Muted backgrounds (table headers, disabled) |
| `--muted-foreground`       | `#71717A`  | `#A1A1AA` | Secondary text, placeholders                |
| `--primary`                | `#0066CC`  | `#3B82F6` | Primary actions, links, active states       |
| `--primary-foreground`     | `#FFFFFF`  | `#FFFFFF` | Text on primary background                  |
| `--destructive`            | `#DC2626`  | `#EF4444` | Destructive actions, error states           |
| `--destructive-foreground` | `#FFFFFF`  | `#FFFFFF` | Text on destructive background              |
| `--border`                 | `#E4E4E7`  | `#27272A` | Borders, dividers                           |
| `--ring`                   | `#0066CC`  | `#3B82F6` | Focus ring                                  |

### Status Colors

| Token                       | Value (Light) | Value (Dark) | Usage                               |
| --------------------------- | ------------- | ------------ | ----------------------------------- |
| `--status-active`           | `#16A34A`     | `#22C55E`    | ACTIVE badge, success indicators    |
| `--status-suspended`        | `#DC2626`     | `#EF4444`    | SUSPENDED badge, error indicators   |
| `--status-provisioning`     | `#6B7280`     | `#9CA3AF`    | PROVISIONING badge, neutral/pending |
| `--status-pending-deletion` | `#D97706`     | `#F59E0B`    | PENDING_DELETION badge, warning     |
| `--status-deleted`          | `#6B7280`     | `#4B5563`    | DELETED badge, disabled             |
| `--status-success`          | `#16A34A`     | `#22C55E`    | Success toasts, checkmarks          |
| `--status-warning`          | `#D97706`     | `#F59E0B`    | Warning banners, caution            |
| `--status-info`             | `#2563EB`     | `#60A5FA`    | Informational banners               |

### Authentication-Specific Tokens (Spec 002)

| Token                     | Value (Light) | Value (Dark) | Usage                                                   |
| ------------------------- | ------------- | ------------ | ------------------------------------------------------- |
| `--auth-bg-gradient-from` | `#F0F4FF`     | `#0A0E1A`    | Subtle gradient on pre-login page (tenant-customizable) |
| `--auth-bg-gradient-to`   | `#FFFFFF`     | `#0A0A0A`    | Gradient end color (matches --background)               |

### Authorization-Specific Tokens (Spec 003)

| Token                    | Value (Light) | Value (Dark) | Usage                                                   |
| ------------------------ | ------------- | ------------ | ------------------------------------------------------- |
| `--condition-not-border` | `#D97706`     | `#F59E0B`    | Dashed border for NOT groups in ABAC condition builder  |
| `--condition-not-bg`     | `#FFFBEB`     | `#1C1917`    | Subtle background for NOT groups                        |
| `--permission-tree-line` | `#D4D4D8`     | `#3F3F46`    | Tree connector lines (├ └) for wildcard sub-permissions |

### Contrast Verification (WCAG 2.1 AA)

| Pair                                          | Ratio (Light) | Ratio (Dark) | Pass |
| --------------------------------------------- | ------------- | ------------ | ---- |
| `--foreground` on `--background`              | 17.4:1        | 17.4:1       | ✅   |
| `--muted-foreground` on `--background`        | 4.7:1         | 4.6:1        | ✅   |
| `--primary-foreground` on `--primary`         | 5.3:1         | 4.6:1        | ✅   |
| `--destructive-foreground` on `--destructive` | 5.8:1         | 4.6:1        | ✅   |
| `--status-active` text on `--background`      | 4.5:1         | 4.6:1        | ✅   |
| `--status-warning` text on `--background`     | 4.5:1         | 4.5:1        | ✅   |

---

## 3. Typography

### Scale

| Token                   | Value           | Usage                                 |
| ----------------------- | --------------- | ------------------------------------- |
| `--font-size-xs`        | 12px / 0.75rem  | Captions, helper text, timestamps     |
| `--font-size-sm`        | 14px / 0.875rem | Table cells, secondary labels, badges |
| `--font-size-base`      | 16px / 1rem     | Body text, form inputs                |
| `--font-size-lg`        | 18px / 1.125rem | Card titles, subheadings              |
| `--font-size-xl`        | 20px / 1.25rem  | Section headings                      |
| `--font-size-2xl`       | 24px / 1.5rem   | Page titles (h2)                      |
| `--font-size-3xl`       | 30px / 1.875rem | Hero headings (h1)                    |
| `--line-height-tight`   | 1.25            | Headings                              |
| `--line-height-normal`  | 1.5             | Body text                             |
| `--line-height-relaxed` | 1.75            | Long-form content                     |

### Font Families

| Token         | Value                                            | Usage                                  |
| ------------- | ------------------------------------------------ | -------------------------------------- |
| `--font-sans` | `Inter, system-ui, -apple-system, sans-serif`    | All UI text                            |
| `--font-mono` | `JetBrains Mono, Fira Code, Consolas, monospace` | Code, slugs, IDs, infrastructure names |

### Font Weights

| Token             | Value | Usage                         |
| ----------------- | ----- | ----------------------------- |
| `--font-normal`   | 400   | Body text                     |
| `--font-medium`   | 500   | Labels, table headers         |
| `--font-semibold` | 600   | Card titles, section headings |
| `--font-bold`     | 700   | Page titles, emphasis         |

---

## 4. Spacing

| Token         | Value | Usage                                       |
| ------------- | ----- | ------------------------------------------- |
| `--space-0.5` | 2px   | Micro gaps (icon-to-text tight)             |
| `--space-1`   | 4px   | Inline icon gaps, badge padding             |
| `--space-1.5` | 6px   | Compact input padding                       |
| `--space-2`   | 8px   | Icon gaps, tight stacking, button padding-y |
| `--space-3`   | 12px  | Compact card padding, input padding-x       |
| `--space-4`   | 16px  | Default card padding, form spacing          |
| `--space-5`   | 20px  | Modal padding                               |
| `--space-6`   | 24px  | Section spacing within a page               |
| `--space-8`   | 32px  | Between major sections                      |
| `--space-10`  | 40px  | Page-level vertical spacing                 |
| `--space-12`  | 48px  | Empty state vertical padding                |

---

## 5. Border Radius

| Token           | Value  | Usage                            |
| --------------- | ------ | -------------------------------- |
| `--radius-sm`   | 4px    | Inputs, badges, tags             |
| `--radius-md`   | 6px    | Buttons, cards                   |
| `--radius-lg`   | 8px    | Modals, panels                   |
| `--radius-xl`   | 12px   | Large cards, featured content    |
| `--radius-full` | 9999px | Avatars, pills, circular buttons |

---

## 6. Shadows

| Token         | Value                                                               | Usage                  |
| ------------- | ------------------------------------------------------------------- | ---------------------- |
| `--shadow-sm` | `0 1px 2px rgba(0,0,0,0.05)`                                        | Subtle lift for inputs |
| `--shadow-md` | `0 4px 6px -1px rgba(0,0,0,0.07), 0 2px 4px -2px rgba(0,0,0,0.05)`  | Cards, dropdowns       |
| `--shadow-lg` | `0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1)`  | Modals, overlays       |
| `--shadow-xl` | `0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1)` | Floating panels        |

---

## 7. Transitions

| Token                 | Value               | Usage                              |
| --------------------- | ------------------- | ---------------------------------- |
| `--transition-fast`   | `150ms ease-in-out` | Hover states, color changes        |
| `--transition-normal` | `200ms ease-in-out` | Accordion, tab switching           |
| `--transition-slow`   | `300ms ease-in-out` | Sidebar collapse, modal open/close |

---

## 8. Breakpoints

| Token | Value  | Usage                            |
| ----- | ------ | -------------------------------- |
| `sm`  | 640px  | Mobile landscape                 |
| `md`  | 768px  | Tablet portrait                  |
| `lg`  | 1024px | Tablet landscape / small desktop |
| `xl`  | 1280px | Standard desktop                 |
| `2xl` | 1440px | Large desktop                    |

**Primary design targets**:

- Super Admin panel: Desktop-first (1440px → 1024px → 768px)
- Tenant web app: Desktop-first with responsive support (1440px → 768px → 375px)

---

## 9. Component Guidelines

### Existing `@plexica/ui` Components

The following components are available and should be reused:

| Component                                                                | Variants                                                | Notes                               |
| ------------------------------------------------------------------------ | ------------------------------------------------------- | ----------------------------------- |
| `Button`                                                                 | primary, secondary, outline, ghost, destructive, danger | Sizes: sm, md, lg                   |
| `Input`                                                                  | default, error                                          | With optional label                 |
| `Label`                                                                  | default                                                 | Associates with input via `htmlFor` |
| `Badge`                                                                  | default, secondary, outline, danger                     | For status indicators               |
| `Card`, `CardHeader`, `CardContent`, `CardTitle`                         | default                                                 | Container component                 |
| `Modal`                                                                  | default                                                 | With focus trap                     |
| `Alert`, `AlertTitle`, `AlertDescription`                                | default, destructive                                    | For banners                         |
| `Checkbox`                                                               | default                                                 | For plugin selection                |
| `Switch`                                                                 | default                                                 | For toggle settings                 |
| `Select`                                                                 | default                                                 | Dropdown selection                  |
| `Progress`                                                               | default                                                 | Progress bars                       |
| `Skeleton`                                                               | default                                                 | Loading placeholders                |
| `EmptyState`                                                             | default                                                 | Empty data states                   |
| `DataTable`                                                              | default                                                 | Sortable/filterable tables          |
| `Tabs`, `TabsList`, `TabsTrigger`, `TabsContent`                         | default                                                 | Tab navigation                      |
| `Dialog`, `DialogContent`, `DialogHeader`, `DialogTitle`, `DialogFooter` | default                                                 | Modal dialogs                       |
| `Toast`                                                                  | success, error, warning, info                           | Notification toasts                 |
| `Tooltip`                                                                | default                                                 | Hover tooltips                      |
| `Spinner`                                                                | default                                                 | Loading spinners                    |
| `Pagination`                                                             | default                                                 | Page navigation                     |
| `Breadcrumbs`                                                            | default                                                 | Navigation breadcrumbs              |
| `Separator`                                                              | default                                                 | Visual dividers                     |
| `Textarea`                                                               | default                                                 | Multi-line text input               |
| `Avatar`                                                                 | default                                                 | User avatars                        |
| `StatusBadge`                                                            | default                                                 | Status indicators                   |
| `StatCard`                                                               | default                                                 | Metric cards                        |

### New Components Needed (Spec 001)

| Component              | Purpose                                                   | Screens Used                                   |
| ---------------------- | --------------------------------------------------------- | ---------------------------------------------- |
| `StepWizard`           | Multi-step form with step indicator, back/next navigation | Tenant Creation                                |
| `ProvisioningProgress` | Real-time provisioning status with per-step indicators    | Tenant Creation                                |
| `ColorPicker`          | Hex color input with visual swatch preview                | Tenant Creation (theme), Tenant Admin Branding |
| `DeletionCountdown`    | Displays remaining days/hours until permanent deletion    | Tenant Detail, Tenant List                     |
| `ThemePreview`         | Mini app shell showing live theme preview                 | Tenant Admin Branding                          |

### New Components Needed (Spec 002)

| Component             | Purpose                                                                   | Screens Used                            |
| --------------------- | ------------------------------------------------------------------------- | --------------------------------------- |
| `SessionExpiredModal` | Non-dismissable modal overlay prompting re-authentication on token expiry | Any authenticated page (app shell)      |
| `RateLimitCountdown`  | Warning alert with live countdown timer for rate-limited login attempts   | Pre-Login Landing Page                  |
| `AuthErrorPage`       | Full-screen error layout for tenant not found / suspended / Keycloak down | Pre-Login Landing Page (error variants) |

### New Components Needed (Spec 003)

| Component                  | Purpose                                                                 | Screens Used                            |
| -------------------------- | ----------------------------------------------------------------------- | --------------------------------------- |
| `PermissionGroupAccordion` | Collapsible permission group labeled by source (Core / Plugin name)     | Role Editor, Role Detail                |
| `WildcardPermissionRow`    | Checkbox with auto-select/deselect of sub-permissions                   | Role Editor                             |
| `ConditionBuilder`         | Visual nested AND/OR/NOT condition tree editor for ABAC policies        | ABAC Policy Editor                      |
| `ConditionRow`             | Single condition row (attribute, operator, value) within condition tree | ABAC Policy Editor                      |
| `PolicySummary`            | Auto-generated plain-English summary of ABAC policy conditions          | ABAC Policy Editor                      |
| `RoleAssignmentDialog`     | Dialog for assigning/removing roles with change diff preview            | User Role Assignment                    |
| `EffectBadge`              | Colored badge for ABAC policy effect (DENY = red, FILTER = blue)        | Policy List, Policy Editor              |
| `SystemRoleBadge`          | Lock icon + "System" badge for immutable system roles                   | Role List, Role Detail, Role Assignment |

---

## 10. Icon Library

**Icon set**: [Lucide React](https://lucide.dev/) (already in use across codebase)

| Icon             | Lucide Name                   | Usage                        |
| ---------------- | ----------------------------- | ---------------------------- |
| Building         | `Building2`                   | Tenant icon                  |
| Puzzle piece     | `Puzzle`                      | Plugin icon                  |
| Check circle     | `CheckCircle2`                | Success / valid indicator    |
| Alert circle     | `AlertCircle`                 | Error / info indicator       |
| Warning triangle | `AlertTriangle`               | Warning / provisioning error |
| Search           | `Search`                      | Search input icon            |
| X                | `X`                           | Close / dismiss              |
| Chevrons         | `ChevronLeft`, `ChevronRight` | Pagination, navigation       |
| Mail             | `Mail`                        | Admin invitation             |
| Refresh          | `RefreshCw`                   | Retry / resend               |
| Clock            | `Clock`                       | Countdown / pending          |
| Trash            | `Trash2`                      | Delete action                |
| Pause            | `Pause`                       | Suspend action               |
| Play             | `Play`                        | Activate action              |
| Palette          | `Palette`                     | Theme / branding             |
| Eye              | `Eye`                         | View details                 |
| Shield           | `Shield`                      | Access control / security    |
| Lock             | `Lock`                        | System role indicator        |
| Sparkles         | `Sparkles`                    | Wildcard permission (✦)      |
| Filter           | `Filter`                      | ABAC FILTER effect           |
| Ban              | `Ban`                         | ABAC DENY effect             |
| GitBranch        | `GitBranch`                   | Condition tree nesting       |
| Plus             | `Plus`                        | Add condition / add group    |
| UserCog          | `UserCog`                     | Manage user roles            |
| MoreVertical     | `MoreVertical`                | Row action menu (⋮)          |
| LogIn            | `LogIn`                       | Sign In action               |
| LogOut           | `LogOut`                      | Sign Out action              |
| Timer            | `Timer`                       | Rate limit countdown         |
| ShieldAlert      | `ShieldAlert`                 | Super Admin login icon       |

---

## 11. Anti-Patterns

**Do NOT**:

- Use `confirm()` browser dialogs for destructive actions. Use `Dialog` component with clear consequences.
- Show raw JSON in user-facing UI (current issue in TenantDetailModal for settings/theme).
- Use color alone to indicate status — always pair with text label or icon.
- Use placeholder text as the only label for form inputs.
- Allow form submission with client-side-only validation (always validate server-side too).
- Create inline styles — use design tokens via Tailwind classes.

---

## 12. Cross-References

| Document                    | Path                                          |
| --------------------------- | --------------------------------------------- |
| UI component library        | `packages/ui/src/components/`                 |
| Super Admin app             | `apps/super-admin/`                           |
| Tenant web app              | `apps/web/`                                   |
| Storybook stories           | `packages/ui/src/components/*/\*.stories.tsx` |
| Constitution (UX standards) | `.forge/constitution.md` Art. 1.3             |
